var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function r(t){t.forEach(e)}function o(t){return"function"==typeof t}function c(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function i(e,...n){if(null==e)return t;const r=e.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}function s(t,e,n){t.$$.on_destroy.push(i(e,n))}function a(t,e,n,r){return t[1]&&r?function(t,e){for(const n in e)t[n]=e[n];return t}(n.ctx.slice(),t[1](r(e))):n.ctx}function l(t,e){t.appendChild(e)}function u(t,e,n){t.insertBefore(e,n||null)}function d(t){t.parentNode&&t.parentNode.removeChild(t)}function f(t){return document.createElement(t)}function p(t){return document.createTextNode(t)}function h(){return p(" ")}function m(){return p("")}function g(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function v(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function $(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function b(t,e){t.value=null==e?"":e}function y(t,e,n,r){null===n?t.style.removeProperty(e):t.style.setProperty(e,n,r?"important":"")}function x(t,e,n){t.classList[n?"add":"remove"](e)}let k;function w(t){k=t}function _(t){(function(){if(!k)throw new Error("Function called outside component initialization");return k})().$$.on_mount.push(t)}function S(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t.call(this,e)))}const C=[],E=[];let M=[];const N=[],W=Promise.resolve();let j=!1;function A(t){M.push(t)}const O=new Set;let R=0;function G(){if(0!==R)return;const t=k;do{try{for(;R<C.length;){const t=C[R];R++,w(t),z(t.$$)}}catch(t){throw C.length=0,R=0,t}for(w(null),C.length=0,R=0;E.length;)E.pop()();for(let t=0;t<M.length;t+=1){const e=M[t];O.has(e)||(O.add(e),e())}M.length=0}while(C.length);for(;N.length;)N.pop()();j=!1,O.clear(),w(t)}function z(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(A)}}const I=new Set;let P;function T(){P={r:0,c:[],p:P}}function X(){P.r||r(P.c),P=P.p}function B(t,e){t&&t.i&&(I.delete(t),t.i(e))}function J(t,e,n,r){if(t&&t.o){if(I.has(t))return;I.add(t),P.c.push((()=>{I.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}else r&&r()}function D(t,e){J(t,1,1,(()=>{e.delete(t.key)}))}function F(t,e,n,o,c,i,s,a,l,u,d,f){let p=t.length,h=i.length,m=p;const g={};for(;m--;)g[t[m].key]=m;const v=[],$=new Map,b=new Map,y=[];for(m=h;m--;){const t=f(c,i,m),r=n(t);let a=s.get(r);a?o&&y.push((()=>a.p(t,e))):(a=u(r,t),a.c()),$.set(r,v[m]=a),r in g&&b.set(r,Math.abs(m-g[r]))}const x=new Set,k=new Set;function w(t){B(t,1),t.m(a,d),s.set(t.key,t),d=t.first,h--}for(;p&&h;){const e=v[h-1],n=t[p-1],r=e.key,o=n.key;e===n?(d=e.first,p--,h--):$.has(o)?!s.has(r)||x.has(r)?w(e):k.has(o)?p--:b.get(r)>b.get(o)?(k.add(r),w(e)):(x.add(o),p--):(l(n,s),p--)}for(;p--;){const e=t[p];$.has(e.key)||l(e,s)}for(;h;)w(v[h-1]);return r(y),v}function H(t){t&&t.c()}function L(t,n,c,i){const{fragment:s,after_update:a}=t.$$;s&&s.m(n,c),i||A((()=>{const n=t.$$.on_mount.map(e).filter(o);t.$$.on_destroy?t.$$.on_destroy.push(...n):r(n),t.$$.on_mount=[]})),a.forEach(A)}function U(t,e){const n=t.$$;null!==n.fragment&&(!function(t){const e=[],n=[];M.forEach((r=>-1===t.indexOf(r)?e.push(r):n.push(r))),n.forEach((t=>t())),M=e}(n.after_update),r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function V(t,e){-1===t.$$.dirty[0]&&(C.push(t),j||(j=!0,W.then(G)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function q(e,o,c,i,s,a,l,u=[-1]){const f=k;w(e);const p=e.$$={fragment:null,ctx:[],props:a,update:t,not_equal:s,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(o.context||(f?f.$$.context:[])),callbacks:n(),dirty:u,skip_bound:!1,root:o.target||f.$$.root};l&&l(p.root);let h=!1;if(p.ctx=c?c(e,o.props||{},((t,n,...r)=>{const o=r.length?r[0]:n;return p.ctx&&s(p.ctx[t],p.ctx[t]=o)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](o),h&&V(e,t)),n})):[],p.update(),h=!0,r(p.before_update),p.fragment=!!i&&i(p.ctx),o.target){if(o.hydrate){const t=function(t){return Array.from(t.childNodes)}(o.target);p.fragment&&p.fragment.l(t),t.forEach(d)}else p.fragment&&p.fragment.c();o.intro&&B(e.$$.fragment),L(e,o.target,o.anchor,o.customElement),G()}w(f)}class K{$destroy(){U(this,1),this.$destroy=t}$on(e,n){if(!o(n))return t;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const t=r.indexOf(n);-1!==t&&r.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}
/*! js-cookie v3.0.1 | MIT */function Y(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}var Q=function t(e,n){function r(t,r,o){if("undefined"!=typeof document){"number"==typeof(o=Y({},n,o)).expires&&(o.expires=new Date(Date.now()+864e5*o.expires)),o.expires&&(o.expires=o.expires.toUTCString()),t=encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var c="";for(var i in o)o[i]&&(c+="; "+i,!0!==o[i]&&(c+="="+o[i].split(";")[0]));return document.cookie=t+"="+e.write(r,t)+c}}return Object.create({set:r,get:function(t){if("undefined"!=typeof document&&(!arguments.length||t)){for(var n=document.cookie?document.cookie.split("; "):[],r={},o=0;o<n.length;o++){var c=n[o].split("="),i=c.slice(1).join("=");try{var s=decodeURIComponent(c[0]);if(r[s]=e.read(i,s),t===s)break}catch(t){}}return t?r[t]:r}},remove:function(t,e){r(t,"",Y({},e,{expires:-1}))},withAttributes:function(e){return t(this.converter,Y({},this.attributes,e))},withConverter:function(e){return t(Y({},this.converter,e),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(e)}})}({read:function(t){return'"'===t[0]&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});function Z(t){let e=document.getElementById(t);if(e)return JSON.parse(e.textContent)}function tt(t){let e,n;return{c(){e=f("div"),n=p(t[0]),v(e,"class","invalid-feedback")},m(t,r){u(t,e,r),l(e,n)},p(t,e){1&e&&$(n,t[0])},d(t){t&&d(e)}}}function et(e){let n,o,c,i,s,a,p,m,$,y,k,w,_,S=e[0]&&tt(e);return{c(){n=f("form"),o=f("div"),c=f("input"),i=h(),s=f("div"),a=f("input"),p=h(),S&&S.c(),m=h(),$=f("div"),$.innerHTML='<input type="submit" class="btn btn-primary" value="Join"/>',y=h(),k=f("div"),k.innerHTML='<label class="col"><input type="checkbox" name="is_spectator"/> Join as a spectator üëÅÔ∏è</label>',v(c,"type","hidden"),v(c,"name","csrfmiddlewaretoken"),c.value=Q.get("csrftoken"),v(a,"type","text"),v(a,"name","name"),v(a,"class","form-control"),x(a,"is-invalid",e[0]),v(s,"class","col"),v($,"class","col"),v(o,"class","row row-cols-lg-auto"),v(k,"class","row"),v(n,"method","post")},m(t,r){u(t,n,r),l(n,o),l(o,c),l(o,i),l(o,s),l(s,a),b(a,e[1]),l(s,p),S&&S.m(s,null),l(o,m),l(o,$),l(n,y),l(n,k),w||(_=[g(a,"change",e[2]),g(a,"input",e[3])],w=!0)},p(t,[e]){2&e&&a.value!==t[1]&&b(a,t[1]),1&e&&x(a,"is-invalid",t[0]),t[0]?S?S.p(t,e):(S=tt(t),S.c(),S.m(s,null)):S&&(S.d(1),S=null)},i:t,o:t,d(t){t&&d(n),S&&S.d(),w=!1,r(_)}}}function nt(t,e,n){let r,o="";_((()=>{const t=window.localStorage.getItem("name");t&&n(1,o=t)}));return[r,o,()=>{o?(window.localStorage.setItem("name",o),n(0,r=void 0)):n(0,r="Name cannot be empty")},function(){o=this.value,n(1,o)}]}class rt extends K{constructor(t){super(),q(this,t,nt,et,c,{})}}const ot=(t,e={})=>{Ct(e);let{colors:n=["#FFC700","#FF0000","#2E3191","#41BBC7"],duration:r=3500,force:o=.5,particleCount:c=150,particleShape:i="mix",particleSize:s=12,destroyAfterDone:a=!0,stageHeight:l=800,stageWidth:u=1600}=e;!function(t){const e=mt("style");e.dataset.neoconfetti="",e.textContent='@keyframes fk9XWG_y-axis{to{transform:translate3d(0,var(--stage-height),0)}}@keyframes fk9XWG_x-axis{to{transform:translate3d(var(--x-landing-point),0,0)}}@keyframes fk9XWG_rotation{50%{transform:rotate3d(var(--half-rotation),180deg)}to{transform:rotate3d(var(--rotation),360deg)}}.fk9XWG_container{width:0;height:0;z-index:1200;position:relative;overflow:visible}.fk9XWG_particle{animation:x-axis var(--duration-chaos)forwards cubic-bezier(var(--x1),var(--x2),var(--x3),var(--x4));animation-name:fk9XWG_x-axis}.fk9XWG_particle>div{animation:y-axis var(--duration-chaos)forwards cubic-bezier(var(--y1),var(--y2),var(--y3),var(--y4));width:var(--width);height:var(--height);animation-name:fk9XWG_y-axis;position:absolute;top:0;left:0}.fk9XWG_particle>div:before{height:100%;width:100%;content:"";background-color:var(--bgcolor);animation:rotation var(--rotation-duration)infinite linear;border-radius:var(--border-radius);animation-name:fk9XWG_rotation;display:block}',gt(document.head,e)}(),t.classList.add("fk9XWG_container"),t.style.setProperty("--stage-height",l+"px");let d,f=vt(c,n),p=ct(t,f);function h(t,e){const n=pt(ft()*(kt-1)),c="rectangles"!==i&&("circles"===i||wt(n)),a=(e,n)=>t.style.setProperty(e,n+"");a("--x-landing-point",bt(dt(yt(e,90)-180),0,180,-u/2,u/2)+"px"),a("--duration-chaos",r-pt(1e3*ft())+"ms");const l=ft()<at?$t(ft()*lt,2):0;a("--x1",l),a("--x2",-1*l),a("--x3",l),a("--x4",$t(dt(bt(dt(yt(e,90)-180),0,180,-1,1)),4)),a("--y1",$t(ft()*ut,4)),a("--y2",$t(ft()*o*(xt()?1:-1),4)),a("--y3",ut),a("--y4",$t(ht(bt(dt(e-180),0,180,o,-o),0),4)),a("--width",(c?s:pt(4*ft())+s/2)+"px"),a("--height",(c?s:pt(2*ft())+s)+"px");const d=n.toString(2).padStart(3,"0").split("");a("--half-rotation",d.map((t=>+t/2+""))),a("--rotation",d),a("--rotation-duration",$t(ft()*(st-it)+it)+"ms"),a("--border-radius",c?"50%":0)}for(const[t,e]of Object.entries(p))h(e,f[+t].degree);return Promise.resolve().then((()=>d=setTimeout((()=>a&&(t.innerHTML="")),r))),{update(e){Ct(e);const h=e.particleCount??c,m=e.colors??n,g=e.stageHeight??l;if(f=vt(h,m),h===c&&JSON.stringify(n)!==JSON.stringify(m))for(const[t,{color:e}]of Object.entries(f))p[+t].style.setProperty("--bgcolor",e);h!==c&&(t.innerHTML="",p=ct(t,f)),a&&!e.destroyAfterDone&&clearTimeout(d),t.style.setProperty("--stage-height",g+"px"),n=m,r=e.duration??r,o=e.force??o,c=h,i=e.particleShape??i,s=e.particleSize??s,a=e.destroyAfterDone??a,l=g,u=e.stageWidth??u},destroy(){clearTimeout(d)}}};function ct(t,e=[]){const n=[];for(const{color:r}of e){const e=mt("div");e.className="fk9XWG_particle",e.style.setProperty("--bgcolor",r);const o=mt("div");gt(e,o),gt(t,e),n.push(e)}return n}const it=200,st=800,at=.1,lt=.3,ut=.5,dt=Math.abs,ft=Math.random,pt=Math.round,ht=Math.max,mt=t=>document.createElement(t),gt=(t,e)=>t.appendChild(e),vt=(t,e)=>Array.from({length:t},((n,r)=>({color:e[r%e.length],degree:360*r/t}))),$t=(t,e=2)=>pt((t+Number.EPSILON)*10**e)/10**e,bt=(t,e,n,r,o)=>(t-e)*(o-r)/(n-e)+r,yt=(t,e)=>t+e>360?t+e-360:t+e,xt=()=>ft()>.5,kt=6,wt=t=>1!==t&&xt(),_t=t=>void 0===t,St=(t,e)=>{if(!_t(t)&&Number.isSafeInteger(t)&&t<0)throw new Error(e+" must be a positive integer")},Ct=({particleCount:t,duration:e,colors:n,particleSize:r,force:o,stageHeight:c,stageWidth:i,particleShape:s})=>{if(St(t,"particleCount"),St(e,"duration"),St(r,"particleSize"),St(o,"force"),St(c,"stageHeight"),St(i,"stageWidth"),!_t(s)&&!/^(mix|circles|rectangles)$/i.test(s))throw new Error('particlesShape should be either "mix" or "circles" or "rectangle"');if(!_t(n)&&!Array.isArray(n))throw new Error("colors must be an array of strings");if(o>1)throw new Error("force must be within 0 and 1")};function Et(t){let e,n,o,c;const i=t[3].default,s=function(t,e,n,r){if(t){const o=a(t,e,n,r);return t[0](o)}}(i,t,t[2],null);return{c(){e=f("div"),s&&s.c(),v(e,"class","card btn svelte-xiahgm"),v(e,"disabled",t[0]),x(e,"selected",t[1])},m(r,i){u(r,e,i),s&&s.m(e,null),n=!0,o||(c=[g(e,"click",t[4]),g(e,"keypress",t[5])],o=!0)},p(t,[r]){s&&s.p&&(!n||4&r)&&function(t,e,n,r,o,c){if(o){const i=a(e,n,r,c);t.p(i,o)}}(s,i,t,t[2],n?function(t,e,n,r){if(t[2]&&r){const o=t[2](r(n));if(void 0===e.dirty)return o;if("object"==typeof o){const t=[],n=Math.max(e.dirty.length,o.length);for(let r=0;r<n;r+=1)t[r]=e.dirty[r]|o[r];return t}return e.dirty|o}return e.dirty}(i,t[2],r,null):function(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}(t[2]),null),(!n||1&r)&&v(e,"disabled",t[0]),(!n||2&r)&&x(e,"selected",t[1])},i(t){n||(B(s,t),n=!0)},o(t){J(s,t),n=!1},d(t){t&&d(e),s&&s.d(t),o=!1,r(c)}}}function Mt(t,e,n){let{$$slots:r={},$$scope:o}=e,{disabled:c=!0}=e,{selected:i=""}=e;return t.$$set=t=>{"disabled"in t&&n(0,c=t.disabled),"selected"in t&&n(1,i=t.selected),"$$scope"in t&&n(2,o=t.$$scope)},[c,i,o,r,function(e){S.call(this,t,e)},function(e){S.call(this,t,e)}]}class Nt extends K{constructor(t){super(),q(this,t,Mt,Et,c,{disabled:0,selected:1})}}function Wt(t){let e;function n(t,e){return t[1]?Ot:At}let r=n(t),o=r(t);return{c(){o.c(),e=m()},m(t,n){o.m(t,n),u(t,e,n)},p(t,c){r===(r=n(t))&&o?o.p(t,c):(o.d(1),o=r(t),o&&(o.c(),o.m(e.parentNode,e)))},d(t){o.d(t),t&&d(e)}}}function jt(e){let n;return{c(){n=p("üëÅÔ∏è")},m(t,e){u(t,n,e)},p:t,d(t){t&&d(n)}}}function At(e){let n;return{c(){n=p("‚åõ")},m(t,e){u(t,n,e)},p:t,d(t){t&&d(n)}}}function Ot(t){let e,n=t[0].vote+"";return{c(){e=p(n)},m(t,n){u(t,e,n)},p(t,r){1&r&&n!==(n=t[0].vote+"")&&$(e,n)},d(t){t&&d(e)}}}function Rt(t){let e;function n(t,e){return t[0].is_spectator?jt:t[0].vote?Wt:void 0}let r=n(t),o=r&&r(t);return{c(){o&&o.c(),e=m()},m(t,n){o&&o.m(t,n),u(t,e,n)},p(t,c){r===(r=n(t))&&o?o.p(t,c):(o&&o.d(1),o=r&&r(t),o&&(o.c(),o.m(e.parentNode,e)))},d(t){o&&o.d(t),t&&d(e)}}}function Gt(t){let e,n,r,o,c,i,s=t[0].name+"";return c=new Nt({props:{$$slots:{default:[Rt]},$$scope:{ctx:t}}}),{c(){e=f("div"),n=f("strong"),r=p(s),o=h(),H(c.$$.fragment),v(e,"class","participant svelte-1s7tb0t"),y(e,"transform","rotate("+t[2]+"deg) translate(33vw) rotate(90deg)")},m(t,s){u(t,e,s),l(e,n),l(n,r),l(e,o),L(c,e,null),i=!0},p(t,[n]){(!i||1&n)&&s!==(s=t[0].name+"")&&$(r,s);const o={};131&n&&(o.$$scope={dirty:n,ctx:t}),c.$set(o),(!i||4&n)&&y(e,"transform","rotate("+t[2]+"deg) translate(33vw) rotate(90deg)")},i(t){i||(B(c.$$.fragment,t),i=!0)},o(t){J(c.$$.fragment,t),i=!1},d(t){t&&d(e),U(c)}}}function zt(t,e,n){let r,o,c,{user:i}=e,{isRevealed:s}=e,{i:a}=e,{count:l}=e;return t.$$set=t=>{"user"in t&&n(0,i=t.user),"isRevealed"in t&&n(1,s=t.isRevealed),"i"in t&&n(3,a=t.i),"count"in t&&n(4,l=t.count)},t.$$.update=()=>{if(120&t.$$.dirty)if(1==l)n(2,c=-90);else{const t=176,e=90,i=t-4;n(6,o=Math.min(i,e+l/8*(i-e))),n(5,r=Math.min(t,135+l/8*(t-135))),n(2,c=a*(o/(l-1))-r)}},[i,s,c,a,l,r,o]}class It extends K{constructor(t){super(),q(this,t,zt,Gt,c,{user:0,isRevealed:1,i:3,count:4})}}const Pt=[];function Tt(e,n=t){let r;const o=new Set;function i(t){if(c(e,t)&&(e=t,r)){const t=!Pt.length;for(const t of o)t[1](),Pt.push(t,e);if(t){for(let t=0;t<Pt.length;t+=2)Pt[t][0](Pt[t+1]);Pt.length=0}}}return{set:i,update:function(t){i(t(e))},subscribe:function(c,s=t){const a=[c,s];return o.add(a),1===o.size&&(r=n(i)||t),c(e),()=>{o.delete(a),0===o.size&&r&&(r(),r=null)}}}}function Xt(e,n,c){const s=!Array.isArray(e),a=s?[e]:e,l=n.length<2;return u=e=>{let c=!1;const u=[];let d=0,f=t;const p=()=>{if(d)return;f();const r=n(s?u[0]:u,e);l?e(r):f=o(r)?r:t},h=a.map(((t,e)=>i(t,(t=>{u[e]=t,d&=~(1<<e),c&&p()}),(()=>{d|=1<<e}))));return c=!0,p(),function(){r(h),f()}},{subscribe:Tt(c,u).subscribe};var u}function Bt(t){const e=Tt([]),n=Tt([]),r=Tt(!1),o=Tt({}),c=Tt(void 0),s=Xt(e,(t=>{const e=new Proxy({},{get:(t,e)=>e in t?t[e]:0});return t.forEach((t=>{null!=t.vote&&(e[t.vote]+=1)})),Object.entries(e).sort(((t,e)=>e[1]-t[1]))})),a=t=>{o.update((e=>(e.vote=t,e)))};let l;const u=()=>{l=new WebSocket(t),l.onclose=()=>{c.set("WebSocket connection closed unexpectedly. Trying to reconnect in 2s..."),setTimeout((()=>{console.log("Reconnecting..."),u()}),2e3)},l.onmessage=t=>{const i=JSON.parse(t.data);switch(console.log("message",i),i.type){case"init":e.set(i.users),n.set(i.choices),o.set(i.user),r.set(!1),c.set(void 0);break;case"join":e.update((t=>[...t,i.user]));break;case"leave":e.update((t=>{let e;return t.forEach(((t,n)=>{t.name==i.name&&(e=n)})),t.splice(e,1),t}));break;case"reveal":r.set(!0);break;case"vote":e.update((t=>(t.forEach((t=>{t.id==i.user_id&&(t.vote=i.value)})),[...t])));break;case"error":c.set(i.message)}}};async function d(t,e=undefined){(e=e||{}).action=t,console.log("update",e),l.send(JSON.stringify(e))}u();return{participants:e,isRevealed:r,user:o,choices:n,votes:s,revealVotes:()=>d("reveal"),clearVotes:()=>{a(null),d("clear")},vote:t=>()=>{(function(t){let e;return i(t,(t=>e=t))(),e})(r)||(d("vote",{value:t}),a(t))},changeDeck:()=>{d("change_deck")},error:c}}function Jt(t,e,n){const r=t.slice();return r[19]=e[n],r}function Dt(t,e,n){const r=t.slice();return r[17]=e[n][0],r[22]=e[n][1],r}function Ft(t,e,n){const r=t.slice();return r[16]=e[n],r[26]=n,r}function Ht(t){let e,n;return{c(){e=f("div"),n=p(t[2]),v(e,"class","alert alert-danger"),v(e,"role","alert")},m(t,r){u(t,e,r),l(e,n)},p(t,e){4&e&&$(n,t[2])},d(t){t&&d(e)}}}function Lt(t,e){let n,r,o;return r=new It({props:{isRevealed:e[3],user:e[16],i:e[26],count:e[1]}}),{key:t,first:null,c(){n=m(),H(r.$$.fragment),this.first=n},m(t,e){u(t,n,e),L(r,t,e),o=!0},p(t,n){e=t;const o={};8&n&&(o.isRevealed=e[3]),1&n&&(o.user=e[16]),1&n&&(o.i=e[26]),2&n&&(o.count=e[1]),r.$set(o)},i(t){o||(B(r.$$.fragment,t),o=!0)},o(t){J(r.$$.fragment,t),o=!1},d(t){t&&d(n),U(r,t)}}}function Ut(t){let e,n,r,o=[],c=new Map,i=t[4]&&1==t[4].length&&t[4][0][1]>1&&Vt(),s=t[4];const a=t=>t[17];for(let e=0;e<s.length;e+=1){let n=Dt(t,s,e),r=a(n);c.set(r,o[e]=Yt(r,n))}let l=null;return s.length||(l=qt()),{c(){i&&i.c(),e=h(),n=f("div");for(let t=0;t<o.length;t+=1)o[t].c();l&&l.c(),v(n,"class","row")},m(t,c){i&&i.m(t,c),u(t,e,c),u(t,n,c);for(let t=0;t<o.length;t+=1)o[t]&&o[t].m(n,null);l&&l.m(n,null),r=!0},p(t,r){t[4]&&1==t[4].length&&t[4][0][1]>1?i||(i=Vt(),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),16&r&&(s=t[4],T(),o=F(o,r,a,1,t,s,c,n,D,Yt,null,Dt),X(),!s.length&&l?l.p(t,r):s.length?l&&(l.d(1),l=null):(l=qt(),l.c(),l.m(n,null)))},i(t){if(!r){for(let t=0;t<s.length;t+=1)B(o[t]);r=!0}},o(t){for(let t=0;t<o.length;t+=1)J(o[t]);r=!1},d(t){i&&i.d(t),t&&d(e),t&&d(n);for(let t=0;t<o.length;t+=1)o[t].d();l&&l.d()}}}function Vt(e){let n,r,c;return{c(){n=f("div")},m(e,i){var s;u(e,n,i),r||(s=ot.call(null,n),c=s&&o(s.destroy)?s.destroy:t,r=!0)},d(t){t&&d(n),r=!1,c()}}}function qt(e){let n;return{c(){n=f("div"),n.textContent="No votes",v(n,"class","col text-center")},m(t,e){u(t,n,e)},p:t,d(t){t&&d(n)}}}function Kt(t){let e,n=t[17]+"";return{c(){e=p(n)},m(t,n){u(t,e,n)},p(t,r){16&r&&n!==(n=t[17]+"")&&$(e,n)},d(t){t&&d(e)}}}function Yt(t,e){let n,r,o,c,i,s,a,m,g=e[22]+"";return r=new Nt({props:{$$slots:{default:[Kt]},$$scope:{ctx:e}}}),{key:t,first:null,c(){n=f("div"),H(r.$$.fragment),o=h(),c=f("div"),i=p(g),s=p("x"),a=h(),v(c,"class","text-muted text-center"),v(n,"class","col text-center"),this.first=n},m(t,e){u(t,n,e),L(r,n,null),l(n,o),l(n,c),l(c,i),l(c,s),l(n,a),m=!0},p(t,n){e=t;const o={};134217744&n&&(o.$$scope={dirty:n,ctx:e}),r.$set(o),(!m||16&n)&&g!==(g=e[22]+"")&&$(i,g)},i(t){m||(B(r.$$.fragment,t),m=!0)},o(t){J(r.$$.fragment,t),m=!1},d(t){t&&d(n),U(r)}}}function Qt(t){let e;return{c(){e=p("You joined as spectator")},m(t,n){u(t,e,n)},d(t){t&&d(e)}}}function Zt(e){let n,r,o;return{c(){n=f("button"),n.textContent="Reveal",v(n,"class","btn btn-primary")},m(t,c){u(t,n,c),r||(o=g(n,"click",e[11]),r=!0)},p:t,d(t){t&&d(n),r=!1,o()}}}function te(e){let n,r,o;return{c(){n=f("button"),n.textContent="Clear",v(n,"class","btn btn-warning")},m(t,c){u(t,n,c),r||(o=g(n,"click",e[12]),r=!0)},p:t,d(t){t&&d(n),r=!1,o()}}}function ee(t){let e,n,r=t[6],o=[];for(let e=0;e<r.length;e+=1)o[e]=re(Jt(t,r,e));const c=t=>J(o[t],1,1,(()=>{o[t]=null}));return{c(){e=f("div");for(let t=0;t<o.length;t+=1)o[t].c();v(e,"class","d-flex justify-content-center mb-3")},m(t,r){u(t,e,r);for(let t=0;t<o.length;t+=1)o[t]&&o[t].m(e,null);n=!0},p(t,n){if(131176&n){let i;for(r=t[6],i=0;i<r.length;i+=1){const c=Jt(t,r,i);o[i]?(o[i].p(c,n),B(o[i],1)):(o[i]=re(c),o[i].c(),B(o[i],1),o[i].m(e,null))}for(T(),i=r.length;i<o.length;i+=1)c(i);X()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)B(o[t]);n=!0}},o(t){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)J(o[t]);n=!1},d(t){t&&d(e),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(o,t)}}}function ne(t){let e,n,r=t[19]+"";return{c(){e=p(r),n=h()},m(t,r){u(t,e,r),u(t,n,r)},p(t,n){64&n&&r!==(r=t[19]+"")&&$(e,r)},d(t){t&&d(e),t&&d(n)}}}function re(t){let e,n;return e=new Nt({props:{disabled:t[3],selected:t[19]==t[5].vote,$$slots:{default:[ne]},$$scope:{ctx:t}}}),e.$on("click",(function(){o(t[17](t[19]))&&t[17](t[19]).apply(this,arguments)})),e.$on("keypress",(function(){o(t[17](t[19]))&&t[17](t[19]).apply(this,arguments)})),{c(){H(e.$$.fragment)},m(t,r){L(e,t,r),n=!0},p(n,r){t=n;const o={};8&r&&(o.disabled=t[3]),96&r&&(o.selected=t[19]==t[5].vote),134217792&r&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(B(e.$$.fragment,t),n=!0)},o(t){J(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function oe(e){let n,r,o;return{c(){n=f("button"),n.textContent="Add fake user",v(n,"class","btn btn-light")},m(t,c){u(t,n,c),r||(o=g(n,"click",e[15]),r=!0)},p:t,d(t){t&&d(n),r=!1,o()}}}function ce(t){let e,n,r,o,c,i,s,a,m,$,b,y,x,k,w,_,S,C,E=[],M=new Map,N=t[2]&&Ht(t),W=t[0];const j=t=>t[16].id;for(let e=0;e<W.length;e+=1){let n=Ft(t,W,e),r=j(n);M.set(r,E[e]=Lt(r,n))}let A=t[3]&&Ut(t),O=t[5].is_spectator&&Qt();function R(t,e){return t[3]?te:Zt}let G=R(t),z=G(t),I=!t[5].is_spectator&&ee(t),P="Jieter"==t[5].name&&oe(t);return{c(){N&&N.c(),e=h(),n=f("div");for(let t=0;t<E.length;t+=1)E[t].c();r=h(),o=f("div"),A&&A.c(),c=h(),O&&O.c(),i=h(),s=f("div"),z.c(),a=h(),I&&I.c(),m=h(),$=f("div"),P&&P.c(),b=h(),y=f("button"),x=p("Change deck"),v(s,"class","d-flex justify-content-center mb-3"),v(o,"class","controls svelte-14wosg6"),v(n,"class","participants svelte-14wosg6"),v(y,"class","btn btn-secondary"),y.disabled=k=!t[3],v(y,"title",w=t[3]?"Switch to other deck":"Switching deck is only possible if cards are revealed"),v($,"class","d-flex justify-content-center mb-3")},m(d,f){N&&N.m(d,f),u(d,e,f),u(d,n,f);for(let t=0;t<E.length;t+=1)E[t]&&E[t].m(n,null);l(n,r),l(n,o),A&&A.m(o,null),l(o,c),O&&O.m(o,null),l(o,i),l(o,s),z.m(s,null),u(d,a,f),I&&I.m(d,f),u(d,m,f),u(d,$,f),P&&P.m($,null),l($,b),l($,y),l(y,x),_=!0,S||(C=g(y,"click",t[13]),S=!0)},p(t,[a]){t[2]?N?N.p(t,a):(N=Ht(t),N.c(),N.m(e.parentNode,e)):N&&(N.d(1),N=null),11&a&&(W=t[0],T(),E=F(E,a,j,1,t,W,M,n,D,Lt,r,Ft),X()),t[3]?A?(A.p(t,a),8&a&&B(A,1)):(A=Ut(t),A.c(),B(A,1),A.m(o,c)):A&&(T(),J(A,1,1,(()=>{A=null})),X()),t[5].is_spectator?O||(O=Qt(),O.c(),O.m(o,i)):O&&(O.d(1),O=null),G===(G=R(t))&&z?z.p(t,a):(z.d(1),z=G(t),z&&(z.c(),z.m(s,null))),t[5].is_spectator?I&&(T(),J(I,1,1,(()=>{I=null})),X()):I?(I.p(t,a),32&a&&B(I,1)):(I=ee(t),I.c(),B(I,1),I.m(m.parentNode,m)),"Jieter"==t[5].name?P?P.p(t,a):(P=oe(t),P.c(),P.m($,b)):P&&(P.d(1),P=null),(!_||8&a&&k!==(k=!t[3]))&&(y.disabled=k),(!_||8&a&&w!==(w=t[3]?"Switch to other deck":"Switching deck is only possible if cards are revealed"))&&v(y,"title",w)},i(t){if(!_){for(let t=0;t<W.length;t+=1)B(E[t]);B(A),B(I),_=!0}},o(t){for(let t=0;t<E.length;t+=1)J(E[t]);J(A),J(I),_=!1},d(t){N&&N.d(t),t&&d(e),t&&d(n);for(let t=0;t<E.length;t+=1)E[t].d();A&&A.d(),O&&O.d(),z.d(),t&&d(a),I&&I.d(t),t&&d(m),t&&d($),P&&P.d(),S=!1,C()}}}function ie(t,e,n){let r,o,c,i,a,l;const u=Z("websocket_url"),{user:d,participants:f,isRevealed:p,choices:h,votes:m,revealVotes:g,clearVotes:v,vote:$,changeDeck:b,error:y}=Bt(u);let x;return s(t,d,(t=>n(5,a=t))),s(t,f,(t=>n(0,r=t))),s(t,p,(t=>n(3,c=t))),s(t,h,(t=>n(6,l=t))),s(t,m,(t=>n(4,i=t))),s(t,y,(t=>n(2,o=t))),t.$$.update=()=>{1&t.$$.dirty&&n(1,x=r.length)},[r,x,o,c,i,a,l,f,p,h,m,g,v,b,y,function(){f.update((t=>{const e=t=>t[Math.floor(Math.random()*t.length)];var n,r;return[...t,{id:(n=1e4,r=2e4,Math.floor(Math.random()*(r-n)+n)),name:e(["Bob","Charlie","Erin","Felix","Gude","Henri","Irma","June","Kevin"]),vote:e(["1","2"])}]}))},d,$]}class se extends K{constructor(t){super(),q(this,t,ie,ce,c,{})}}function ae(t){let e,n;return e=new rt({}),{c(){H(e.$$.fragment)},m(t,r){L(e,t,r),n=!0},i(t){n||(B(e.$$.fragment,t),n=!0)},o(t){J(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function le(t){let e,n;return e=new se({}),{c(){H(e.$$.fragment)},m(t,r){L(e,t,r),n=!0},i(t){n||(B(e.$$.fragment,t),n=!0)},o(t){J(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function ue(e){let n,r,o,c,i,s,a,l,p;const m=[le,ae],g=[];return o=function(t,e){return t[0]?0:1}(e),c=g[o]=m[o](e),{c(){n=f("h1"),n.textContent="Planning poker",r=h(),c.c(),i=h(),s=f("br"),a=h(),l=f("a"),l.textContent="New poker session",v(l,"href","/")},m(t,e){u(t,n,e),u(t,r,e),g[o].m(t,e),u(t,i,e),u(t,s,e),u(t,a,e),u(t,l,e),p=!0},p:t,i(t){p||(B(c),p=!0)},o(t){J(c),p=!1},d(t){t&&d(n),t&&d(r),g[o].d(t),t&&d(i),t&&d(s),t&&d(a),t&&d(l)}}}function de(t){return[Z("websocket_url")]}return new class extends K{constructor(t){super(),q(this,t,de,ue,c,{})}}({target:document.querySelector("#poker")})}();
