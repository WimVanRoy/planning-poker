var app=function(){"use strict";function t(){}function e(t,e){for(const n in e)t[n]=e[n];return t}function n(t){return t()}function o(){return Object.create(null)}function r(t){t.forEach(n)}function i(t){return"function"==typeof t}function l(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let c;function s(t,e){return t===e||(c||(c=document.createElement("a")),c.href=e,t===c.href)}function a(e,...n){if(null==e){for(const t of n)t(void 0);return t}const o=e.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}function u(t,e,n){t.$$.on_destroy.push(a(e,n))}function d(t,e,n,o){if(t){const r=f(t,e,n,o);return t[0](r)}}function f(t,n,o,r){return t[1]&&r?e(o.ctx.slice(),t[1](r(n))):o.ctx}function p(t,e,n,o){if(t[2]&&o){const r=t[2](o(n));if(void 0===e.dirty)return r;if("object"==typeof r){const t=[],n=Math.max(e.dirty.length,r.length);for(let o=0;o<n;o+=1)t[o]=e.dirty[o]|r[o];return t}return e.dirty|r}return e.dirty}function m(t,e,n,o,r,i){if(r){const l=f(e,n,o,i);t.p(l,r)}}function g(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}function h(t,e){const n={};e=new Set(e);for(const o in t)e.has(o)||"$"===o[0]||(n[o]=t[o]);return n}function v(t,e){t.appendChild(e)}function $(t,e,n){const o=function(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;if(e&&e.host)return e;return t.ownerDocument}(t);if(!o.getElementById(e)){const t=x("style");t.id=e,t.textContent=n,function(t,e){v(t.head||t,e),e.sheet}(o,t)}}function b(t,e,n){t.insertBefore(e,n||null)}function y(t){t.parentNode&&t.parentNode.removeChild(t)}function w(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function x(t){return document.createElement(t)}function k(t){return document.createTextNode(t)}function _(){return k(" ")}function z(){return k("")}function S(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function C(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}const N=["width","height"];function O(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const o in e)null==e[o]?t.removeAttribute(o):"style"===o?t.style.cssText=e[o]:"__value"===o?t.value=t[o]=e[o]:n[o]&&n[o].set&&-1===N.indexOf(o)?t[o]=e[o]:C(t,o,e[o])}function j(t,e){e=""+e,t.data!==e&&(t.data=e)}function E(t,e){t.value=null==e?"":e}function R(t,e,n,o){null==n?t.style.removeProperty(e):t.style.setProperty(e,n,o?"important":"")}function A(t,e,n){t.classList.toggle(e,!!n)}let M;function q(t){M=t}function F(t){(function(){if(!M)throw new Error("Function called outside component initialization");return M})().$$.on_mount.push(t)}const W=[],J=[];let B=[];const I=[],P=Promise.resolve();let G=!1;function T(t){B.push(t)}const X=new Set;let D=0;function H(){if(0!==D)return;const t=M;do{try{for(;D<W.length;){const t=W[D];D++,q(t),L(t.$$)}}catch(t){throw W.length=0,D=0,t}for(q(null),W.length=0,D=0;J.length;)J.pop()();for(let t=0;t<B.length;t+=1){const e=B[t];X.has(e)||(X.add(e),e())}B.length=0}while(W.length);for(;I.length;)I.pop()();G=!1,X.clear(),q(t)}function L(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(T)}}const U=new Set;let Y;function Q(){Y={r:0,c:[],p:Y}}function V(){Y.r||r(Y.c),Y=Y.p}function K(t,e){t&&t.i&&(U.delete(t),t.i(e))}function Z(t,e,n,o){if(t&&t.o){if(U.has(t))return;U.add(t),Y.c.push((()=>{U.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}else o&&o()}function tt(t){return void 0!==t?.length?t:Array.from(t)}function et(t,e){Z(t,1,1,(()=>{e.delete(t.key)}))}function nt(t,e,n,o,i,l,c,s,a,u,d,f){let p=t.length,m=l.length,g=p;const h={};for(;g--;)h[t[g].key]=g;const v=[],$=new Map,b=new Map,y=[];for(g=m;g--;){const t=f(i,l,g),r=n(t);let s=c.get(r);s?o&&y.push((()=>s.p(t,e))):(s=u(r,t),s.c()),$.set(r,v[g]=s),r in h&&b.set(r,Math.abs(g-h[r]))}const w=new Set,x=new Set;function k(t){K(t,1),t.m(s,d),c.set(t.key,t),d=t.first,m--}for(;p&&m;){const e=v[m-1],n=t[p-1],o=e.key,r=n.key;e===n?(d=e.first,p--,m--):$.has(r)?!c.has(o)||w.has(o)?k(e):x.has(r)?p--:b.get(o)>b.get(r)?(x.add(o),k(e)):(w.add(r),p--):(a(n,c),p--)}for(;p--;){const e=t[p];$.has(e.key)||a(e,c)}for(;m;)k(v[m-1]);return r(y),v}function ot(t){t&&t.c()}function rt(t,e,o){const{fragment:l,after_update:c}=t.$$;l&&l.m(e,o),T((()=>{const e=t.$$.on_mount.map(n).filter(i);t.$$.on_destroy?t.$$.on_destroy.push(...e):r(e),t.$$.on_mount=[]})),c.forEach(T)}function it(t,e){const n=t.$$;null!==n.fragment&&(!function(t){const e=[],n=[];B.forEach((o=>-1===t.indexOf(o)?e.push(o):n.push(o))),n.forEach((t=>t())),B=e}(n.after_update),r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function lt(t,e){-1===t.$$.dirty[0]&&(W.push(t),G||(G=!0,P.then(H)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ct(e,n,i,l,c,s,a=null,u=[-1]){const d=M;q(e);const f=e.$$={fragment:null,ctx:[],props:s,update:t,not_equal:c,bound:o(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(d?d.$$.context:[])),callbacks:o(),dirty:u,skip_bound:!1,root:n.target||d.$$.root};a&&a(f.root);let p=!1;if(f.ctx=i?i(e,n.props||{},((t,n,...o)=>{const r=o.length?o[0]:n;return f.ctx&&c(f.ctx[t],f.ctx[t]=r)&&(!f.skip_bound&&f.bound[t]&&f.bound[t](r),p&&lt(e,t)),n})):[],f.update(),p=!0,r(f.before_update),f.fragment=!!l&&l(f.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);f.fragment&&f.fragment.l(t),t.forEach(y)}else f.fragment&&f.fragment.c();n.intro&&K(e.$$.fragment),rt(e,n.target,n.anchor),H()}q(d)}class st{$$=void 0;$$set=void 0;$destroy(){it(this,1),this.$destroy=t}$on(e,n){if(!i(n))return t;const o=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return o.push(n),()=>{const t=o.indexOf(n);-1!==t&&o.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function at(t){$(t,"svelte-1asytna",".deck-card.svelte-1asytna{display:flex;justify-content:center;align-content:center;color:#444;margin:2px 2px;flex-direction:column;border:1px solid rgba(0, 0, 0, 0.2);border-radius:0.4vw;transition:background-color 100ms ease-out 200ms;filter:drop-shadow(0 0 0.5rem rgba(100, 100, 100, 0.3));transform:rotate(2deg);transition:transform 200ms ease-in-out 100ms}")}function ut(t){let e,n;const o=t[7].default,r=d(o,t,t[6],null);return{c(){e=x("div"),r&&r.c(),C(e,"class","deck-card svelte-1asytna"),R(e,"transform","rotate("+t[1]+"deg)"),R(e,"background",t[0]||"#FFF"),R(e,"height",t[4]),R(e,"width",t[3]),R(e,"font-size",t[2])},m(t,o){b(t,e,o),r&&r.m(e,null),n=!0},p(t,[i]){r&&r.p&&(!n||64&i)&&m(r,o,t,t[6],n?p(o,t[6],i,null):g(t[6]),null),(!n||2&i)&&R(e,"transform","rotate("+t[1]+"deg)"),(!n||1&i)&&R(e,"background",t[0]||"#FFF"),(!n||16&i)&&R(e,"height",t[4]),(!n||8&i)&&R(e,"width",t[3]),(!n||4&i)&&R(e,"font-size",t[2])},i(t){n||(K(r,t),n=!0)},o(t){Z(r,t),n=!1},d(t){t&&y(e),r&&r.d(t)}}}function dt(t,e,n){let o,r,i,{$$slots:l={},$$scope:c}=e,{color:s=null}=e,{size:a="regular"}=e,{rotation:u=0}=e;return t.$$set=t=>{"color"in t&&n(0,s=t.color),"size"in t&&n(5,a=t.size),"rotation"in t&&n(1,u=t.rotation),"$$scope"in t&&n(6,c=t.$$scope)},t.$$.update=()=>{32&t.$$.dirty&&n(4,o="sm"==a?"4.5vw":"7vw"),32&t.$$.dirty&&n(3,r="sm"==a?"2.6vw":"4vw"),32&t.$$.dirty&&n(2,i="sm"==a?"1.4vw":"1.85vw")},[s,u,i,r,o,a,c,l]}"undefined"!=typeof window&&(window.__svelte||(window.__svelte={v:new Set})).v.add("4");class ft extends st{constructor(t){super(),ct(this,t,dt,ut,l,{color:0,size:5,rotation:1},at)}}
/*! js-cookie v3.0.5 | MIT */function pt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)t[o]=n[o]}return t}var mt=function t(e,n){function o(t,o,r){if("undefined"!=typeof document){"number"==typeof(r=pt({},n,r)).expires&&(r.expires=new Date(Date.now()+864e5*r.expires)),r.expires&&(r.expires=r.expires.toUTCString()),t=encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var i="";for(var l in r)r[l]&&(i+="; "+l,!0!==r[l]&&(i+="="+r[l].split(";")[0]));return document.cookie=t+"="+e.write(o,t)+i}}return Object.create({set:o,get:function(t){if("undefined"!=typeof document&&(!arguments.length||t)){for(var n=document.cookie?document.cookie.split("; "):[],o={},r=0;r<n.length;r++){var i=n[r].split("="),l=i.slice(1).join("=");try{var c=decodeURIComponent(i[0]);if(o[c]=e.read(l,c),t===c)break}catch(t){}}return t?o[t]:o}},remove:function(t,e){o(t,"",pt({},e,{expires:-1}))},withAttributes:function(e){return t(this.converter,pt({},this.attributes,e))},withConverter:function(e){return t(pt({},this.converter,e),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(e)}})}({read:function(t){return'"'===t[0]&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});function gt(t){let e=document.getElementById(t);if(e)return JSON.parse(e.textContent)}function ht(t){const e=Math.abs(t);return e>999?Math.sign(t)*(e/1e3).toFixed(1)+"k":Math.sign(t)*e}function vt(t,e,n){return function(){const o=1e4*Math.sin(t++);return(o-Math.floor(o))*(n-e)+e}}function $t(t,e,n){const o=t.slice();return o[8]=e[n],o}function bt(t,e,n){const o=t.slice();return o[11]=e[n][0],o[12]=e[n][1],o}function yt(t,e,n){const o=t.slice();return o[15]=e[n][0],o[16]=e[n][1],o}function wt(t){let e,n;return{c(){e=x("div"),n=k(t[2]),C(e,"class","invalid-feedback")},m(t,o){b(t,e,o),v(e,n)},p(t,e){4&e&&j(n,t[2])},d(t){t&&y(e)}}}function xt(t){let e,n,o;return{c(){e=x("div"),n=x("iframe"),s(n.src,o="https://www.youtube.com/embed/"+t[4]+"?autoplay=1")||C(n,"src",o),C(n,"title","Youtube video"),C(n,"allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"),n.allowFullscreen=!0,C(e,"class","ratio ratio-16x9")},m(t,o){b(t,e,o),v(e,n)},p(t,e){16&e&&!s(n.src,o="https://www.youtube.com/embed/"+t[4]+"?autoplay=1")&&C(n,"src",o)},d(t){t&&y(e)}}}function kt(t){let e,n,o,r,i,l,c,s=tt(t[3].basic),a=[];for(let e=0;e<s.length;e+=1)a[e]=_t(yt(t,s,e));let u=tt(t[3].decks),d=[];for(let e=0;e<u.length;e+=1)d[e]=Ct($t(t,u,e));const f=t=>Z(d[t],1,1,(()=>{d[t]=null}));return{c(){e=x("div");for(let t=0;t<a.length;t+=1)a[t].c();n=_(),o=x("div"),o.textContent="Starting at 2023-10-01, ignoring single-vote rounds.",r=_(),i=x("div"),l=x("div");for(let t=0;t<d.length;t+=1)d[t].c();C(o,"class","light p-1"),R(o,"font-size","10px"),C(e,"class","col-md-3"),C(l,"class","m-1"),C(i,"class","col-md-6")},m(t,s){b(t,e,s);for(let t=0;t<a.length;t+=1)a[t]&&a[t].m(e,null);v(e,n),v(e,o),b(t,r,s),b(t,i,s),v(i,l);for(let t=0;t<d.length;t+=1)d[t]&&d[t].m(l,null);c=!0},p(t,o){if(8&o){let r;for(s=tt(t[3].basic),r=0;r<s.length;r+=1){const i=yt(t,s,r);a[r]?a[r].p(i,o):(a[r]=_t(i),a[r].c(),a[r].m(e,n))}for(;r<a.length;r+=1)a[r].d(1);a.length=s.length}if(8&o){let e;for(u=tt(t[3].decks),e=0;e<u.length;e+=1){const n=$t(t,u,e);d[e]?(d[e].p(n,o),K(d[e],1)):(d[e]=Ct(n),d[e].c(),K(d[e],1),d[e].m(l,null))}for(Q(),e=u.length;e<d.length;e+=1)f(e);V()}},i(t){if(!c){for(let t=0;t<u.length;t+=1)K(d[t]);c=!0}},o(t){d=d.filter(Boolean);for(let t=0;t<d.length;t+=1)Z(d[t]);c=!1},d(t){t&&(y(e),y(r),y(i)),w(a,t),w(d,t)}}}function _t(t){let e,n,o,r,i,l=t[15]+"",c=t[16]+"";return{c(){e=x("div"),n=k(l),o=_(),r=x("span"),i=k(c),C(r,"class","badge bg-primary rounded-pill"),C(e,"class","d-flex justify-content-between align-items-center p-1")},m(t,l){b(t,e,l),v(e,n),v(e,o),v(e,r),v(r,i)},p(t,e){8&e&&l!==(l=t[15]+"")&&j(n,l),8&e&&c!==(c=t[16]+"")&&j(i,c)},d(t){t&&y(e)}}}function zt(t){let e,n=t[11]+"";return{c(){e=k(n)},m(t,n){b(t,e,n)},p(t,o){8&o&&n!==(n=t[11]+"")&&j(e,n)},d(t){t&&y(e)}}}function St(t){let e,n,o,r,i,l,c=ht(t[12])+"";return n=new ft({props:{size:"sm",$$slots:{default:[zt]},$$scope:{ctx:t}}}),{c(){e=x("div"),ot(n.$$.fragment),o=_(),r=x("div"),i=k(c),C(r,"class","text-muted"),C(e,"class","d-inline-block text-center")},m(t,c){b(t,e,c),rt(n,e,null),v(e,o),v(e,r),v(r,i),l=!0},p(t,e){const o={};524296&e&&(o.$$scope={dirty:e,ctx:t}),n.$set(o),(!l||8&e)&&c!==(c=ht(t[12])+"")&&j(i,c)},i(t){l||(K(n.$$.fragment,t),l=!0)},o(t){Z(n.$$.fragment,t),l=!1},d(t){t&&y(e),it(n)}}}function Ct(t){let e,n,o,r=tt(t[8]),i=[];for(let e=0;e<r.length;e+=1)i[e]=St(bt(t,r,e));const l=t=>Z(i[t],1,1,(()=>{i[t]=null}));return{c(){e=x("div");for(let t=0;t<i.length;t+=1)i[t].c();n=_(),C(e,"class","d-flex overflow-scroll")},m(t,r){b(t,e,r);for(let t=0;t<i.length;t+=1)i[t]&&i[t].m(e,null);v(e,n),o=!0},p(t,o){if(8&o){let c;for(r=tt(t[8]),c=0;c<r.length;c+=1){const l=bt(t,r,c);i[c]?(i[c].p(l,o),K(i[c],1)):(i[c]=St(l),i[c].c(),K(i[c],1),i[c].m(e,n))}for(Q(),c=r.length;c<i.length;c+=1)l(c);V()}},i(t){if(!o){for(let t=0;t<r.length;t+=1)K(i[t]);o=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)Z(i[t]);o=!1},d(t){t&&y(e),w(i,t)}}}function Nt(t){let e,n,o,i,l,c,s,a,u,d,f,p,m,g,h,$,w,z,N,O,j,R,M,q,F,W,J,B,I,P,G,T,X,D,H,L,U,Y=t[2]&&wt(t),tt=t[4]&&xt(t),et=t[3]&&kt(t);return{c(){e=x("div"),n=x("div"),o=x("div"),i=x("h1"),i.textContent="Planning poker",l=_(),c=x("form"),s=x("div"),a=x("input"),u=_(),d=x("div"),f=x("input"),p=_(),Y&&Y.c(),m=_(),g=x("div"),g.innerHTML='<input type="submit" class="btn btn-primary" value="Join"/>',h=_(),$=x("div"),w=x("label"),z=x("input"),N=k(" Join as a spectator 👁️"),O=_(),j=x("span"),j.textContent="You can always enable voting later",R=_(),M=x("div"),q=x("div"),F=_(),W=x("div"),tt&&tt.c(),J=_(),B=x("div"),I=x("div"),P=x("hr"),G=_(),T=x("div"),et&&et.c(),X=_(),D=x("div"),D.innerHTML='GitHub: <a href="https://github.com/jieter/planning-poker">jieter/planning-poker</a>',C(i,"class","mt-4"),C(a,"type","hidden"),C(a,"name","csrfmiddlewaretoken"),a.value=mt.get("csrftoken"),C(f,"type","text"),C(f,"name","name"),C(f,"class","form-control"),A(f,"is-invalid",t[2]),C(d,"class","col"),C(g,"class","col"),C(s,"class","row row-cols-lg-auto"),C(z,"type","checkbox"),C(z,"name","is_spectator"),C(w,"class","col"),C(j,"class","text-muted"),C($,"class","row"),C(c,"method","post"),C(o,"class","col"),C(n,"class","row"),C(q,"class","col"),C(W,"class","col-8"),C(M,"class","row"),C(e,"class","container"),C(D,"class","col-md-2"),C(T,"class","row"),C(I,"class","container small"),C(B,"class","fixed-bottom mb-3")},m(r,y){b(r,e,y),v(e,n),v(n,o),v(o,i),v(o,l),v(o,c),v(c,s),v(s,a),v(s,u),v(s,d),v(d,f),E(f,t[0]),v(d,p),Y&&Y.m(d,null),v(s,m),v(s,g),v(c,h),v(c,$),v($,w),v(w,z),z.checked=t[1],v(w,N),v($,O),v($,j),v(e,R),v(e,M),v(M,q),v(M,F),v(M,W),tt&&tt.m(W,null),b(r,J,y),b(r,B,y),v(B,I),v(I,P),v(I,G),v(I,T),et&&et.m(T,null),v(T,X),v(T,D),H=!0,L||(U=[S(f,"change",t[5]),S(f,"input",t[6]),S(z,"change",t[7])],L=!0)},p(t,[e]){1&e&&f.value!==t[0]&&E(f,t[0]),(!H||4&e)&&A(f,"is-invalid",t[2]),t[2]?Y?Y.p(t,e):(Y=wt(t),Y.c(),Y.m(d,null)):Y&&(Y.d(1),Y=null),2&e&&(z.checked=t[1]),t[4]?tt?tt.p(t,e):(tt=xt(t),tt.c(),tt.m(W,null)):tt&&(tt.d(1),tt=null),t[3]?et?(et.p(t,e),8&e&&K(et,1)):(et=kt(t),et.c(),K(et,1),et.m(T,X)):et&&(Q(),Z(et,1,1,(()=>{et=null})),V())},i(t){H||(K(et),H=!0)},o(t){Z(et),H=!1},d(t){t&&(y(e),y(J),y(B)),Y&&Y.d(),tt&&tt.d(),et&&et.d(),L=!1,r(U)}}}function Ot(t,e,n){let o,r,i,l="",c=null;F((()=>{const t=localStorage.getItem("name");t&&n(0,l=t);const e=localStorage.getItem("isSpectator");null!==e&&n(1,c="true"===e),n(3,i=gt("statistics"))}));return t.$$.update=()=>{1&t.$$.dirty&&l&&localStorage.setItem("name",l),2&t.$$.dirty&&null!=c&&localStorage.setItem("isSpectator",c?"true":"false"),1&t.$$.dirty&&n(4,o=function(t){if(t)return(t=t.toLowerCase()).match(/dan.*l/)?"yTgSQ2AQGAI":t.match(/arn.*t/)?"6p-lDYPR2P8":t.match(/jonat.*n/)?"N5imM0ftfkQ":void 0}(l))},[l,c,r,i,o,()=>{n(2,r=l?void 0:"Name cannot be empty")},function(){l=this.value,n(0,l)},function(){c=this.checked,n(1,c)}]}class jt extends st{constructor(t){super(),ct(this,t,Ot,Nt,l,{})}}const Et=[];function Rt(e,n=t){let o;const r=new Set;function i(t){if(l(e,t)&&(e=t,o)){const t=!Et.length;for(const t of r)t[1](),Et.push(t,e);if(t){for(let t=0;t<Et.length;t+=2)Et[t][0](Et[t+1]);Et.length=0}}}function c(t){i(t(e))}return{set:i,update:c,subscribe:function(l,s=t){const a=[l,s];return r.add(a),1===r.size&&(o=n(i,c)||t),l(e),()=>{r.delete(a),0===r.size&&o&&(o(),o=null)}}}}function At(e,n,o){const l=!Array.isArray(e),c=l?[e]:e;if(!c.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const s=n.length<2;return u=(e,o)=>{let u=!1;const d=[];let f=0,p=t;const m=()=>{if(f)return;p();const r=n(l?d[0]:d,e,o);s?e(r):p=i(r)?r:t},g=c.map(((t,e)=>a(t,(t=>{d[e]=t,f&=~(1<<e),u&&m()}),(()=>{f|=1<<e}))));return u=!0,m(),function(){r(g),p(),u=!1}},{subscribe:Rt(o,u).subscribe};var u}const Mt=Rt([]),qt=Rt([]),Ft=Rt([]),Wt=Rt(!1),Jt=Rt("tshirt"),Bt=Rt(!1),It=Rt({}),Pt=Rt(void 0),Gt=Rt([]),Tt=Rt(0);function Xt(t){const e=new Proxy({},{get:(t,e)=>e in t?t[e]:0});return t.forEach((t=>{null!=t&&(e[t]+=1)})),Object.entries(e).sort(((t,e)=>e[1]-t[1]))}const Dt=At(Mt,(t=>Xt(t.map((t=>t.vote))))),Ht=At([Bt,Dt],(([t,e])=>t&&1==e.length&&e[0]&&e[0][1]>1)),Lt=At(Mt,(t=>t.every((t=>t.is_spectator||t.vote)))),Ut=At([Mt,It,Ht,Bt],(([t,e,n,o])=>{if(n)return"🎉";if(o)return"🃏";const r=t.filter((t=>!t.is_spectator)),i=r.filter((t=>t.vote)),l=r.length-i.length==1;return r.length>1&&!e.vote&&l?"🚨":"🕶️"})),Yt=t=>{It.update((e=>(e.vote=t,e)))};let Qt;function Vt(t,e=void 0){Qt&&1==Qt.readyState?((e=e||{}).action=t,console.log("update",e),Qt.send(JSON.stringify(e))):console.log("Socket not open yet")}function Kt(t){Qt=new WebSocket(t),Qt.onclose=()=>{Pt.set("WebSocket connection closed unexpectedly. Trying to reconnect in 2s..."),setTimeout((()=>{console.log("Reconnecting..."),Kt(t)}),2e3)},Qt.onopen=()=>{Vt({action:"init"})},Qt.onmessage=t=>{const e=JSON.parse(t.data);switch(console.log("message",e),e.type){case"init":Mt.set(e.users),It.set(e.user),qt.set(e.settings.choices),Wt.set(e.settings.auto_reveal),Bt.set(e.settings.is_revealed),Ft.set(e.settings.decks),Jt.set(e.settings.deck),Gt.set(e.log),Pt.set(void 0),Tt.set(e.reveal_count);break;case"vote":Mt.update((t=>(t.forEach((t=>{t.id==e.user_id&&(t.vote=e.value)})),[...t])));break;case"error":Pt.set(e.message)}}}const Zt=()=>Vt("reveal"),te=()=>{Yt(null),Vt("clear")};function ee(t){return()=>{(function(t){let e;return a(t,(t=>e=t))(),e})(Bt)||(Vt("vote",{value:t}),Yt(t))}}function ne(t,e,n){const o=t.slice();return o[14]=e[n],o}function oe(t){let e,n,o,r,i,l,c,s,a=t[14].time+"",u=t[14].event+"",d=JSON.stringify(t[14].data)+"";return{c(){e=x("div"),n=x("span"),o=k(a),r=_(),i=k(u),l=_(),c=k(d),s=_()},m(t,a){b(t,e,a),v(e,n),v(n,o),v(e,r),v(e,i),v(e,l),v(e,c),v(e,s)},p(t,e){16&e&&a!==(a=t[14].time+"")&&j(o,a),16&e&&u!==(u=t[14].event+"")&&j(i,u),16&e&&d!==(d=JSON.stringify(t[14].data)+"")&&j(c,d)},d(t){t&&y(e)}}}function re(e){let n,o,i,l,c,s,a,u,d,f,p,m,g,h,$,z,N,O,E,R,A,M,q,F,W=JSON.stringify(e[0])+"",J=JSON.stringify(e[1])+"",B=JSON.stringify(e[2])+"",I=JSON.stringify(e[3])+"",P=!e[5]&&function(t){let e,n,o,i,l;return{c(){e=x("button"),e.textContent="Add fake users",n=_(),o=x("button"),o.textContent="Add fake votes",C(e,"class","btn btn-xs btn-warning"),C(o,"class","btn btn-xs btn-warning")},m(r,c){b(r,e,c),b(r,n,c),b(r,o,c),i||(l=[S(e,"click",t[12]),S(o,"click",t[13])],i=!0)},d(t){t&&(y(e),y(n),y(o)),i=!1,r(l)}}}(e),G=tt(e[4]),T=[];for(let t=0;t<G.length;t+=1)T[t]=oe(ne(e,G,t));return{c(){n=x("div"),o=x("div"),i=x("div"),l=k("debug"),c=x("code"),s=k(W),a=_(),u=x("div"),d=k("votes: "),f=x("code"),p=k(J),m=_(),g=x("div"),h=k("user: "),$=x("code"),z=k(B),N=_(),O=x("div"),E=k("participants: "),R=x("code"),A=k(I),M=_(),P&&P.c(),q=_(),F=x("div");for(let t=0;t<T.length;t+=1)T[t].c();C(o,"class","col"),C(F,"class","col"),C(n,"class","row bg-light rounded p-2 small mb-5")},m(t,e){b(t,n,e),v(n,o),v(o,i),v(i,l),v(i,c),v(c,s),v(o,a),v(o,u),v(u,d),v(u,f),v(f,p),v(o,m),v(o,g),v(g,h),v(g,$),v($,z),v(o,N),v(o,O),v(O,E),v(O,R),v(R,A),v(o,M),P&&P.m(o,null),v(n,q),v(n,F);for(let t=0;t<T.length;t+=1)T[t]&&T[t].m(F,null)},p(t,[e]){if(1&e&&W!==(W=JSON.stringify(t[0])+"")&&j(s,W),2&e&&J!==(J=JSON.stringify(t[1])+"")&&j(p,J),4&e&&B!==(B=JSON.stringify(t[2])+"")&&j(z,B),8&e&&I!==(I=JSON.stringify(t[3])+"")&&j(A,I),16&e){let n;for(G=tt(t[4]),n=0;n<G.length;n+=1){const o=ne(t,G,n);T[n]?T[n].p(o,e):(T[n]=oe(o),T[n].c(),T[n].m(F,null))}for(;n<T.length;n+=1)T[n].d(1);T.length=G.length}},i:t,o:t,d(t){t&&y(n),P&&P.d(),w(T,t)}}}function ie(t,e,n){let o,r,i,l,c,s,a,d,f,p,m;u(t,Wt,(t=>n(6,r=t))),u(t,Bt,(t=>n(7,i=t))),u(t,qt,(t=>n(8,l=t))),u(t,Ft,(t=>n(9,c=t))),u(t,Jt,(t=>n(10,s=t))),u(t,Pt,(t=>n(11,a=t))),u(t,Dt,(t=>n(1,d=t))),u(t,It,(t=>n(2,f=t))),u(t,Mt,(t=>n(3,p=t))),u(t,Gt,(t=>n(4,m=t)));const g=!window.location.host.includes("localhost");return t.$$.update=()=>{4032&t.$$.dirty&&n(0,o={error:a,deck:s,decks:c,choices:l,isRevealed:i,autoReveal:r})},[o,d,f,p,m,g,r,i,l,c,s,a,()=>Vt("add_fakes"),()=>Vt("fake_votes")]}Jt.subscribe((t=>Vt("settings",{deck:t}))),Wt.subscribe((t=>Vt("settings",{auto_reveal:t})));class le extends st{constructor(t){super(),ct(this,t,ie,re,l,{})}}const ce=(t,e={})=>{Oe(e);let{colors:n=["#FFC700","#FF0000","#2E3191","#41BBC7"],duration:o=3500,force:r=.5,particleCount:i=150,particleShape:l="mix",particleSize:c=12,destroyAfterDone:s=!0,stageHeight:a=800,stageWidth:u=1600}=e;!function(t){const e=$e("style");e.dataset.neoconfetti="",e.textContent='@keyframes fk9XWG_y-axis{to{transform:translate3d(0,var(--stage-height),0)}}@keyframes fk9XWG_x-axis{to{transform:translate3d(var(--x-landing-point),0,0)}}@keyframes fk9XWG_rotation{50%{transform:rotate3d(var(--half-rotation),180deg)}to{transform:rotate3d(var(--rotation),360deg)}}.fk9XWG_container{width:0;height:0;z-index:1200;position:relative;overflow:visible}.fk9XWG_particle{animation:x-axis var(--duration-chaos)forwards cubic-bezier(var(--x1),var(--x2),var(--x3),var(--x4));animation-name:fk9XWG_x-axis}.fk9XWG_particle>div{animation:y-axis var(--duration-chaos)forwards cubic-bezier(var(--y1),var(--y2),var(--y3),var(--y4));width:var(--width);height:var(--height);animation-name:fk9XWG_y-axis;position:absolute;top:0;left:0}.fk9XWG_particle>div:before{height:100%;width:100%;content:"";background-color:var(--bgcolor);animation:rotation var(--rotation-duration)infinite linear;border-radius:var(--border-radius);animation-name:fk9XWG_rotation;display:block}',be(document.head,e)}(),t.classList.add("fk9XWG_container"),t.style.setProperty("--stage-height",a+"px");let d,f=ye(i,n),p=se(t,f);function m(t,e){const n=he(ge()*(ze-1)),i="rectangles"!==l&&("circles"===l||Se(n)),s=(e,n)=>t.style.setProperty(e,n+"");s("--x-landing-point",xe(me(ke(e,90)-180),0,180,-u/2,u/2)+"px"),s("--duration-chaos",o-he(1e3*ge())+"ms");const a=ge()<de?we(ge()*fe,2):0;s("--x1",a),s("--x2",-1*a),s("--x3",a),s("--x4",we(me(xe(me(ke(e,90)-180),0,180,-1,1)),4)),s("--y1",we(ge()*pe,4)),s("--y2",we(ge()*r*(_e()?1:-1),4)),s("--y3",pe),s("--y4",we(ve(xe(me(e-180),0,180,r,-r),0),4)),s("--width",(i?c:he(4*ge())+c/2)+"px"),s("--height",(i?c:he(2*ge())+c)+"px");const d=n.toString(2).padStart(3,"0").split("");s("--half-rotation",d.map((t=>+t/2+""))),s("--rotation",d),s("--rotation-duration",we(ge()*(ue-ae)+ae)+"ms"),s("--border-radius",i?"50%":0)}for(const[t,e]of Object.entries(p))m(e,f[+t].degree);return Promise.resolve().then((()=>d=setTimeout((()=>s&&(t.innerHTML="")),o))),{update(e){Oe(e);const m=e.particleCount??i,g=e.colors??n,h=e.stageHeight??a;if(f=ye(m,g),m===i&&JSON.stringify(n)!==JSON.stringify(g))for(const[t,{color:e}]of Object.entries(f))p[+t].style.setProperty("--bgcolor",e);m!==i&&(t.innerHTML="",p=se(t,f)),s&&!e.destroyAfterDone&&clearTimeout(d),t.style.setProperty("--stage-height",h+"px"),n=g,o=e.duration??o,r=e.force??r,i=m,l=e.particleShape??l,c=e.particleSize??c,s=e.destroyAfterDone??s,a=h,u=e.stageWidth??u},destroy(){clearTimeout(d)}}};function se(t,e=[]){const n=[];for(const{color:o}of e){const e=$e("div");e.className="fk9XWG_particle",e.style.setProperty("--bgcolor",o);const r=$e("div");be(e,r),be(t,e),n.push(e)}return n}const ae=200,ue=800,de=.1,fe=.3,pe=.5,me=Math.abs,ge=Math.random,he=Math.round,ve=Math.max,$e=t=>document.createElement(t),be=(t,e)=>t.appendChild(e),ye=(t,e)=>Array.from({length:t},((n,o)=>({color:e[o%e.length],degree:360*o/t}))),we=(t,e=2)=>he((t+Number.EPSILON)*10**e)/10**e,xe=(t,e,n,o,r)=>(t-e)*(r-o)/(n-e)+o,ke=(t,e)=>t+e>360?t+e-360:t+e,_e=()=>ge()>.5,ze=6,Se=t=>1!==t&&_e(),Ce=t=>void 0===t,Ne=(t,e)=>{if(!Ce(t)&&Number.isSafeInteger(t)&&t<0)throw new Error(e+" must be a positive integer")},Oe=({particleCount:t,duration:e,colors:n,particleSize:o,force:r,stageHeight:i,stageWidth:l,particleShape:c})=>{if(Ne(t,"particleCount"),Ne(e,"duration"),Ne(o,"particleSize"),Ne(r,"force"),Ne(i,"stageHeight"),Ne(l,"stageWidth"),!Ce(c)&&!/^(mix|circles|rectangles)$/i.test(c))throw new Error('particlesShape should be either "mix" or "circles" or "rectangle"');if(!Ce(n)&&!Array.isArray(n))throw new Error("colors must be an array of strings");if(r>1)throw new Error("force must be within 0 and 1")};function je(t){$(t,"svelte-pulz2o","div.svelte-pulz2o{font-size:1.85vw}.count.svelte-pulz2o{filter:drop-shadow(0 0 0.5em rgba(1, 1, 1, 0.5))}")}function Ee(t,e,n){const o=t.slice();return o[7]=e[n][0],o[8]=e[n][1],o}function Re(e){let n,o,r;return{c(){n=x("div"),C(n,"class","svelte-pulz2o")},m(e,l){var c;b(e,n,l),o||(c=ce.call(null,n),r=c&&i(c.destroy)?c.destroy:t,o=!0)},d(t){t&&y(n),o=!1,r()}}}function Ae(e){let n;return{c(){n=x("div"),n.textContent="No votes",C(n,"class","col text-center p-2 svelte-pulz2o")},m(t,e){b(t,n,e)},p:t,d(t){t&&y(n)}}}function Me(t){let e,n=t[7]+"";return{c(){e=k(n)},m(t,n){b(t,e,n)},p(t,o){1&o&&n!==(n=t[7]+"")&&j(e,n)},d(t){t&&y(e)}}}function qe(t,e){let n,o,r,i,l,c,s,a,u=e[8]+"";return o=new ft({props:{size:e[1],rotation:e[3](),$$slots:{default:[Me]},$$scope:{ctx:e}}}),{key:t,first:null,c(){n=x("div"),ot(o.$$.fragment),r=_(),i=x("div"),l=k(u),c=k("x"),s=_(),C(i,"class","count svelte-pulz2o"),C(n,"class","d-inline-block text-center svelte-pulz2o"),this.first=n},m(t,e){b(t,n,e),rt(o,n,null),v(n,r),v(n,i),v(i,l),v(i,c),v(n,s),a=!0},p(t,n){e=t;const r={};2&n&&(r.size=e[1]),8&n&&(r.rotation=e[3]()),2049&n&&(r.$$scope={dirty:n,ctx:e}),o.$set(r),(!a||1&n)&&u!==(u=e[8]+"")&&j(l,u)},i(t){a||(K(o.$$.fragment,t),a=!0)},o(t){Z(o.$$.fragment,t),a=!1},d(t){t&&y(n),it(o)}}}function Fe(t){let n,o,r,i=[],l=new Map,c=t[2]&&t[4]&&Re(),s=tt(t[0]);const a=t=>t[7];for(let e=0;e<s.length;e+=1){let n=Ee(t,s,e),o=a(n);l.set(o,i[e]=qe(o,n))}let u=null;s.length||(u=Ae());let d=[t[5]],f={};for(let t=0;t<d.length;t+=1)f=e(f,d[t]);return{c(){c&&c.c(),n=_(),o=x("div");for(let t=0;t<i.length;t+=1)i[t].c();u&&u.c(),O(o,f),A(o,"svelte-pulz2o",!0)},m(t,e){c&&c.m(t,e),b(t,n,e),b(t,o,e);for(let t=0;t<i.length;t+=1)i[t]&&i[t].m(o,null);u&&u.m(o,null),r=!0},p(t,[e]){t[2]&&t[4]?c||(c=Re(),c.c(),c.m(n.parentNode,n)):c&&(c.d(1),c=null),11&e&&(s=tt(t[0]),Q(),i=nt(i,e,a,1,t,s,l,o,et,qe,null,Ee),V(),!s.length&&u?u.p(t,e):s.length?u&&(u.d(1),u=null):(u=Ae(),u.c(),u.m(o,null))),O(o,f=function(t,e){const n={},o={},r={$$scope:1};let i=t.length;for(;i--;){const l=t[i],c=e[i];if(c){for(const t in l)t in c||(o[t]=1);for(const t in c)r[t]||(n[t]=c[t],r[t]=1);t[i]=c}else for(const t in l)r[t]=1}for(const t in o)t in n||(n[t]=void 0);return n}(d,[32&e&&t[5]])),A(o,"svelte-pulz2o",!0)},i(t){if(!r){for(let t=0;t<s.length;t+=1)K(i[t]);r=!0}},o(t){for(let t=0;t<i.length;t+=1)Z(i[t]);r=!1},d(t){t&&(y(n),y(o)),c&&c.d(t);for(let t=0;t<i.length;t+=1)i[t].d();u&&u.d()}}}function We(t,n,o){let r;const i=["votes","size","emitConfetti"];let l,c,s=h(n,i);u(t,Tt,(t=>o(6,l=t))),u(t,Ht,(t=>o(4,c=t)));let{votes:a}=n,{size:d}=n,{emitConfetti:f=!0}=n;return t.$$set=t=>{n=e(e({},n),function(t){const e={};for(const n in t)"$"!==n[0]&&(e[n]=t[n]);return e}(t)),o(5,s=h(n,i)),"votes"in t&&o(0,a=t.votes),"size"in t&&o(1,d=t.size),"emitConfetti"in t&&o(2,f=t.emitConfetti)},t.$$.update=()=>{64&t.$$.dirty&&o(3,r=vt(l,-3,3))},[a,d,f,r,c,s,l]}class Je extends st{constructor(t){super(),ct(this,t,We,Fe,l,{votes:0,size:1,emitConfetti:2},je)}}function Be(t){$(t,"svelte-n1eljq",".voting-round.svelte-n1eljq{writing-mode:vertical-lr}.history-item.svelte-n1eljq{background-color:#efefef}")}function Ie(t,e,n){const o=t.slice();o[4]=e[n].data;const r=Xt(o[4].votes);return o[5]=r,o}function Pe(t){let e,n,o;function r(t,e){return t[0]?De:Xe}let i=r(t),l=i(t);return{c(){l.c(),e=k(" previous "),n=k(t[1]),o=k(" rounds")},m(t,r){l.m(t,r),b(t,e,r),b(t,n,r),b(t,o,r)},p(t,o){i!==(i=r(t))&&(l.d(1),l=i(t),l&&(l.c(),l.m(e.parentNode,e))),2&o&&j(n,t[1])},d(t){t&&(y(e),y(n),y(o)),l.d(t)}}}function Ge(t){let e;function n(t,e){return t[0]?Le:He}let o=n(t),r=o(t);return{c(){r.c(),e=k(" previous votes")},m(t,n){r.m(t,n),b(t,e,n)},p(t,i){o!==(o=n(t))&&(r.d(1),r=o(t),r&&(r.c(),r.m(e.parentNode,e)))},d(t){t&&y(e),r.d(t)}}}function Te(e){let n;return{c(){n=k("No history yet.")},m(t,e){b(t,n,e)},p:t,d(t){t&&y(n)}}}function Xe(t){let e;return{c(){e=k("Hide")},m(t,n){b(t,e,n)},d(t){t&&y(e)}}}function De(t){let e;return{c(){e=k("Show")},m(t,n){b(t,e,n)},d(t){t&&y(e)}}}function He(t){let e;return{c(){e=k("Hide")},m(t,n){b(t,e,n)},d(t){t&&y(e)}}}function Le(t){let e;return{c(){e=k("Show")},m(t,n){b(t,e,n)},d(t){t&&y(e)}}}function Ue(t){let e;function n(t,e){return t[0]?Qe:Ye}let o=n(t),r=o(t);return{c(){r.c(),e=z()},m(t,n){r.m(t,n),b(t,e,n)},p(t,i){o!==(o=n(t))&&(r.d(1),r=o(t),r&&(r.c(),r.m(e.parentNode,e)))},d(t){t&&y(e),r.d(t)}}}function Ye(t){let e;return{c(){e=k("▼")},m(t,n){b(t,e,n)},d(t){t&&y(e)}}}function Qe(t){let e;return{c(){e=k("▲")},m(t,n){b(t,e,n)},d(t){t&&y(e)}}}function Ve(t){let e,n,o=tt(t[2].filter(nn)),r=[];for(let e=0;e<o.length;e+=1)r[e]=tn(Ie(t,o,e));const i=t=>Z(r[t],1,1,(()=>{r[t]=null}));return{c(){e=x("div");for(let t=0;t<r.length;t+=1)r[t].c();C(e,"class","d-flex overflow-scroll mb-2 text-muted")},m(t,o){b(t,e,o);for(let t=0;t<r.length;t+=1)r[t]&&r[t].m(e,null);n=!0},p(t,n){if(4&n){let l;for(o=tt(t[2].filter(nn)),l=0;l<o.length;l+=1){const i=Ie(t,o,l);r[l]?(r[l].p(i,n),K(r[l],1)):(r[l]=tn(i),r[l].c(),K(r[l],1),r[l].m(e,null))}for(Q(),l=o.length;l<r.length;l+=1)i(l);V()}},i(t){if(!n){for(let t=0;t<o.length;t+=1)K(r[t]);n=!0}},o(t){r=r.filter(Boolean);for(let t=0;t<r.length;t+=1)Z(r[t]);n=!1},d(t){t&&y(e),w(r,t)}}}function Ke(t){let e,n;return{c(){e=x("br"),n=k("No votes")},m(t,o){b(t,e,o),b(t,n,o)},d(t){t&&(y(e),y(n))}}}function Ze(t){let e,n,o,r;return n=new Je({props:{votes:t[5],emitConfetti:!1,size:"sm"}}),{c(){e=x("div"),ot(n.$$.fragment),o=_(),C(e,"class","small history-item text-start rounded flex-shrink-0 m-1 p-1 svelte-n1eljq")},m(t,i){b(t,e,i),rt(n,e,null),v(e,o),r=!0},p(t,e){const o={};4&e&&(o.votes=t[5]),n.$set(o)},i(t){r||(K(n.$$.fragment,t),r=!0)},o(t){Z(n.$$.fragment,t),r=!1},d(t){t&&y(e),it(n)}}}function tn(t){let e,n,o,r,i,l,c,s=t[4].round+"",a=0==t[5].length&&Ke(),u=t[5].length>0&&Ze(t);return{c(){e=x("small"),n=k("Round "),o=k(s),r=_(),a&&a.c(),i=_(),u&&u.c(),l=z(),C(e,"class","voting-round ms-1 text-center svelte-n1eljq")},m(t,s){b(t,e,s),v(e,n),v(e,o),v(e,r),a&&a.m(e,null),b(t,i,s),u&&u.m(t,s),b(t,l,s),c=!0},p(t,n){(!c||4&n)&&s!==(s=t[4].round+"")&&j(o,s),0==t[5].length?a||(a=Ke(),a.c(),a.m(e,null)):a&&(a.d(1),a=null),t[5].length>0?u?(u.p(t,n),4&n&&K(u,1)):(u=Ze(t),u.c(),K(u,1),u.m(l.parentNode,l)):u&&(Q(),Z(u,1,1,(()=>{u=null})),V())},i(t){c||(K(u),c=!0)},o(t){Z(u),c=!1},d(t){t&&(y(e),y(i),y(l)),a&&a.d(),u&&u.d(t)}}}function en(t){let e,n,o,i,l,c,s;function a(t,e){return 0==t[1]?Te:1==t[1]?Ge:Pe}let u=a(t),d=u(t),f=t[1]>0&&Ue(t),p=!t[0]&&Ve(t);return{c(){e=x("div"),d.c(),n=_(),f&&f.c(),o=_(),p&&p.c(),i=z(),C(e,"role","button"),C(e,"class","text-muted my-1 mx-2 small"),C(e,"tabindex","0")},m(r,a){b(r,e,a),d.m(e,null),v(e,n),f&&f.m(e,null),b(r,o,a),p&&p.m(r,a),b(r,i,a),l=!0,c||(s=[S(e,"click",t[3]),S(e,"keypress",t[3])],c=!0)},p(t,[o]){u===(u=a(t))&&d?d.p(t,o):(d.d(1),d=u(t),d&&(d.c(),d.m(e,n))),t[1]>0?f?f.p(t,o):(f=Ue(t),f.c(),f.m(e,null)):f&&(f.d(1),f=null),t[0]?p&&(Q(),Z(p,1,1,(()=>{p=null})),V()):p?(p.p(t,o),1&o&&K(p,1)):(p=Ve(t),p.c(),K(p,1),p.m(i.parentNode,i))},i(t){l||(K(p),l=!0)},o(t){Z(p),l=!1},d(t){t&&(y(e),y(o),y(i)),d.d(),f&&f.d(),p&&p.d(t),c=!1,r(s)}}}const nn=t=>"reveal"==t.event;function on(t,e,n){let o,r;u(t,Tt,(t=>n(1,o=t))),u(t,Gt,(t=>n(2,r=t)));let i=!0;return[i,o,r,function(){n(0,i=!i)}]}class rn extends st{constructor(t){super(),ct(this,t,on,en,l,{},Be)}}function ln(t){$(t,"svelte-q802sj",".player-card.svelte-q802sj{position:relative;opacity:0;top:-50px}.vote.svelte-q802sj{opacity:100 !important;top:0px !important;transition:all 525ms cubic-bezier(0, 0.5, 0, 0.9)}")}function cn(t){let e,n;const o=t[2].default,r=d(o,t,t[1],null);return{c(){e=x("div"),r&&r.c(),C(e,"class","player-card svelte-q802sj"),A(e,"vote",t[0])},m(t,o){b(t,e,o),r&&r.m(e,null),n=!0},p(t,[i]){r&&r.p&&(!n||2&i)&&m(r,o,t,t[1],n?p(o,t[1],i,null):g(t[1]),null),(!n||1&i)&&A(e,"vote",t[0])},i(t){n||(K(r,t),n=!0)},o(t){Z(r,t),n=!1},d(t){t&&y(e),r&&r.d(t)}}}function sn(t,e,n){let{$$slots:o={},$$scope:r}=e,{vote:i}=e;return t.$$set=t=>{"vote"in t&&n(0,i=t.vote),"$$scope"in t&&n(1,r=t.$$scope)},[i,r,o]}class an extends st{constructor(t){super(),ct(this,t,sn,cn,l,{vote:0},ln)}}function un(t){$(t,"svelte-lelzdz",".participant.svelte-lelzdz.svelte-lelzdz{display:block;position:absolute;text-align:center;top:95%;left:50%;margin:-4vw}.participant.svelte-lelzdz .name.svelte-lelzdz{font-size:2vw}.card-back.svelte-lelzdz.svelte-lelzdz{margin:auto;width:84%;height:87%;border:1px solid var(--bgcolor);border-radius:0.4vw;background-size:0.8vw 0.8vw;background-image:linear-gradient(45deg, transparent 47%, var(--bgcolor) 47%, var(--bgcolor) 53%, transparent 53%),\n        linear-gradient(135deg, transparent 47%, var(--bgcolor) 47%, var(--bgcolor) 53%, transparent 53%)}")}function dn(t){let e;function n(t,e){return t[1]?mn:pn}let o=n(t),r=o(t);return{c(){r.c(),e=z()},m(t,n){r.m(t,n),b(t,e,n)},p(t,i){o===(o=n(t))&&r?r.p(t,i):(r.d(1),r=o(t),r&&(r.c(),r.m(e.parentNode,e)))},d(t){t&&y(e),r.d(t)}}}function fn(e){let n;return{c(){n=k("👁️")},m(t,e){b(t,n,e)},p:t,d(t){t&&y(n)}}}function pn(e){let n;return{c(){n=x("div"),R(n,"--bgcolor","#cc6060"),C(n,"class","card-back svelte-lelzdz")},m(t,e){b(t,n,e)},p:t,d(t){t&&y(n)}}}function mn(t){let e,n=t[0].vote+"";return{c(){e=k(n)},m(t,n){b(t,e,n)},p(t,o){1&o&&n!==(n=t[0].vote+"")&&j(e,n)},d(t){t&&y(e)}}}function gn(t){let e;function n(t,e){return t[0].is_spectator?fn:t[0].vote?dn:void 0}let o=n(t),r=o&&o(t);return{c(){r&&r.c(),e=z()},m(t,n){r&&r.m(t,n),b(t,e,n)},p(t,i){o===(o=n(t))&&r?r.p(t,i):(r&&r.d(1),r=o&&o(t),r&&(r.c(),r.m(e.parentNode,e)))},d(t){t&&y(e),r&&r.d(t)}}}function hn(t){let e,n;return e=new ft({props:{color:"linear-gradient(45deg, #c2c2c2 0%, #FFF 60%)",rotation:t[2],$$slots:{default:[gn]},$$scope:{ctx:t}}}),{c(){ot(e.$$.fragment)},m(t,o){rt(e,t,o),n=!0},p(t,n){const o={};4&n&&(o.rotation=t[2]),131&n&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){n||(K(e.$$.fragment,t),n=!0)},o(t){Z(e.$$.fragment,t),n=!1},d(t){it(e,t)}}}function vn(t){let e,n,o,r,i,l,c=t[0].name+"";return i=new an({props:{vote:t[0].vote,$$slots:{default:[hn]},$$scope:{ctx:t}}}),{c(){e=x("div"),n=x("strong"),o=k(c),r=_(),ot(i.$$.fragment),C(n,"class","name svelte-lelzdz"),C(e,"class","participant svelte-lelzdz"),R(e,"transform","translate(1.3vw) rotate("+t[4]+"deg) translate("+t[3]+") rotate(90deg)")},m(t,c){b(t,e,c),v(e,n),v(n,o),v(e,r),rt(i,e,null),l=!0},p(t,[n]){(!l||1&n)&&c!==(c=t[0].name+"")&&j(o,c);const r={};1&n&&(r.vote=t[0].vote),135&n&&(r.$$scope={dirty:n,ctx:t}),i.$set(r),(!l||24&n)&&R(e,"transform","translate(1.3vw) rotate("+t[4]+"deg) translate("+t[3]+") rotate(90deg)")},i(t){l||(K(i.$$.fragment,t),l=!0)},o(t){Z(i.$$.fragment,t),l=!1},d(t){t&&y(e),it(i)}}}function $n(t,e,n){let o,{user:r}=e,{isRevealed:i}=e,{i:l}=e,{count:c}=e,{rotation:s}=e,{radius:a}=e;return t.$$set=t=>{"user"in t&&n(0,r=t.user),"isRevealed"in t&&n(1,i=t.isRevealed),"i"in t&&n(5,l=t.i),"count"in t&&n(6,c=t.count),"rotation"in t&&n(2,s=t.rotation),"radius"in t&&n(3,a=t.radius)},t.$$.update=()=>{112&t.$$.dirty&&(n(4,o=-90),c>1&&n(4,o-=Math.min(20,174/c)*(l-(c-1)/2)))},[r,i,s,a,o,l,c]}class bn extends st{constructor(t){super(),ct(this,t,$n,vn,l,{user:0,isRevealed:1,i:5,count:6,rotation:2,radius:3},un)}}function yn(t){$(t,"svelte-1y9hivi","label.svelte-1y9hivi{white-space:nowrap}.btn-sm.svelte-1y9hivi{width:100px}.voting-status.svelte-1y9hivi{width:1.5em;color:green}")}function wn(t,e,n){const o=t.slice();return o[8]=e[n][0],o[9]=e[n][1],o}function xn(t){let e,n,o,r,i,l,c,s,a,u,d,f=!1,p=t[9]+"";return a=function(t){let e;return{p(...n){e=n,e.forEach((e=>t.push(e)))},r(){e.forEach((e=>t.splice(t.indexOf(e),1)))}}}(t[6][0]),{c(){e=x("input"),i=_(),l=x("label"),c=k(p),C(e,"type","radio"),C(e,"class","btn-check"),e.__value=n=t[8],E(e,e.__value),C(e,"autocomplete","off"),C(e,"id",o="deck-"+t[8]),e.disabled=r=!t[1],C(l,"class","btn btn-outline-primary svelte-1y9hivi"),C(l,"for",s="deck-"+t[8]),a.p(e)},m(n,o){b(n,e,o),e.checked=e.__value===t[2],b(n,i,o),b(n,l,o),v(l,c),u||(d=S(e,"change",t[5]),u=!0)},p(t,i){1&i&&n!==(n=t[8])&&(e.__value=n,E(e,e.__value),f=!0),1&i&&o!==(o="deck-"+t[8])&&C(e,"id",o),2&i&&r!==(r=!t[1])&&(e.disabled=r),(f||5&i)&&(e.checked=e.__value===t[2]),1&i&&p!==(p=t[9]+"")&&j(c,p),1&i&&s!==(s="deck-"+t[8])&&C(l,"for",s)},d(t){t&&(y(e),y(i),y(l)),a.r(),u=!1,d()}}}function kn(t){let e;function n(t,e){return!t[1]&&t[4]?zn:_n}let o=n(t),r=o(t);return{c(){r.c(),e=z()},m(t,n){r.m(t,n),b(t,e,n)},p(t,i){o!==(o=n(t))&&(r.d(1),r=o(t),r&&(r.c(),r.m(e.parentNode,e)))},d(t){t&&y(e),r.d(t)}}}function _n(t){let e;return{c(){e=x("div"),e.textContent="~",C(e,"class","voting-status svelte-1y9hivi"),C(e,"title","Voting in progress")},m(t,n){b(t,e,n)},d(t){t&&y(e)}}}function zn(t){let e;return{c(){e=x("div"),e.textContent="✓",C(e,"class","voting-status svelte-1y9hivi"),C(e,"title","Voting complete")},m(t,n){b(t,e,n)},d(t){t&&y(e)}}}function Sn(t){let e,n,o;return{c(){e=x("button"),e.textContent="Reveal",C(e,"class","btn btn-sm btn-success svelte-1y9hivi")},m(t,r){b(t,e,r),n||(o=S(e,"click",Zt),n=!0)},d(t){t&&y(e),n=!1,o()}}}function Cn(t){let e,n,o;return{c(){e=x("button"),e.textContent="Clear",C(e,"class","btn btn-sm btn-warning svelte-1y9hivi")},m(t,r){b(t,e,r),n||(o=S(e,"click",te),n=!0)},d(t){t&&y(e),n=!1,o()}}}function Nn(e){let n,o,r,i,l,c,s,a,u,d,f,p=tt(e[0]),m=[];for(let t=0;t<p.length;t+=1)m[t]=xn(wn(e,p,t));let g=!e[3]&&kn(e);function h(t,e){return t[1]?Cn:Sn}let $=h(e),z=$(e);return{c(){n=x("div"),o=x("div");for(let t=0;t<m.length;t+=1)m[t].c();r=k("\n     \n\n    "),g&&g.c(),i=_(),z.c(),l=_(),c=x("div"),s=x("label"),s.textContent="Auto reveal",a=_(),u=x("input"),C(o,"class","btn-group btn-group-sm"),C(o,"role","group"),C(o,"aria-label","Change deck"),C(s,"for","autoReveal"),C(s,"class","svelte-1y9hivi"),C(u,"type","checkbox"),C(u,"class","form-check-input"),C(u,"id","autoReveal"),C(c,"class","form-check form-switch mt-1 ms-3"),C(n,"class","d-flex justify-content-center m-3")},m(t,p){b(t,n,p),v(n,o);for(let t=0;t<m.length;t+=1)m[t]&&m[t].m(o,null);v(n,r),g&&g.m(n,null),v(n,i),z.m(n,null),v(n,l),v(n,c),v(c,s),v(c,a),v(c,u),u.checked=e[3],d||(f=S(u,"change",e[7]),d=!0)},p(t,[e]){if(7&e){let n;for(p=tt(t[0]),n=0;n<p.length;n+=1){const r=wn(t,p,n);m[n]?m[n].p(r,e):(m[n]=xn(r),m[n].c(),m[n].m(o,null))}for(;n<m.length;n+=1)m[n].d(1);m.length=p.length}t[3]?g&&(g.d(1),g=null):g?g.p(t,e):(g=kn(t),g.c(),g.m(n,i)),$!==($=h(t))&&(z.d(1),z=$(t),z&&(z.c(),z.m(n,l))),8&e&&(u.checked=t[3])},i:t,o:t,d(t){t&&y(n),w(m,t),g&&g.d(),z.d(),d=!1,f()}}}function On(t,e,n){let o,r,i,l,c;u(t,Ft,(t=>n(0,o=t))),u(t,Bt,(t=>n(1,r=t))),u(t,Jt,(t=>n(2,i=t))),u(t,Wt,(t=>n(3,l=t))),u(t,Lt,(t=>n(4,c=t)));return[o,r,i,l,c,function(){i=this.__value,Jt.set(i)},[[]],function(){l=this.checked,Wt.set(l)}]}class jn extends st{constructor(t){super(),ct(this,t,On,Nn,l,{},yn)}}function En(t){$(t,"svelte-142q46i",".participants.svelte-142q46i{width:calc(var(--radius) * 1.98);height:var(--radius);border-radius:var(--radius) var(--radius) 0.75vw 0.75vw;background:radial-gradient(circle at bottom, #3e803f 0%, #093d15 58%, #743f11 58.5%, #f0a25c);position:relative;margin:4vh auto}.controls.svelte-142q46i{position:absolute;bottom:0;left:50%;transform:translateX(-50%)}button.selected.svelte-142q46i{font-weight:bold;margin:-8px 0 8px 0 !important;transition:margin 100ms ease-in-out 100ms,\n        font-weight 100ms ease-out 100ms}")}function Rn(t,e,n){const o=t.slice();return o[11]=e[n],o}function An(t,e,n){const o=t.slice();return o[14]=e[n],o[16]=n,o}function Mn(t){let e,n,o;return{c(){e=x("div"),n=x("div"),o=k(t[2]),C(n,"class","alert alert-danger"),C(n,"role","alert"),C(e,"class","fixed-top")},m(t,r){b(t,e,r),v(e,n),v(n,o)},p(t,e){4&e&&j(o,t[2])},d(t){t&&y(e)}}}function qn(t,e){let n,o,r;return o=new bn({props:{isRevealed:e[4],user:e[14],i:e[16],count:e[3].length,radius:.94*Tn+"vw",rotation:e[1]()}}),{key:t,first:null,c(){n=z(),ot(o.$$.fragment),this.first=n},m(t,e){b(t,n,e),rt(o,t,e),r=!0},p(t,n){e=t;const r={};16&n&&(r.isRevealed=e[4]),8&n&&(r.user=e[14]),8&n&&(r.i=e[16]),8&n&&(r.count=e[3].length),2&n&&(r.rotation=e[1]()),o.$set(r)},i(t){r||(K(o.$$.fragment,t),r=!0)},o(t){Z(o.$$.fragment,t),r=!1},d(t){t&&y(n),it(o,t)}}}function Fn(t){let e,n,o;return n=new Je({props:{votes:t[5],style:"color: white;",class:"p-2 mb-2 text-center rounded"}}),{c(){e=x("div"),ot(n.$$.fragment),C(e,"class","controls svelte-142q46i")},m(t,r){b(t,e,r),rt(n,e,null),o=!0},p(t,e){const o={};32&e&&(o.votes=t[5]),n.$set(o)},i(t){o||(K(n.$$.fragment,t),o=!0)},o(t){Z(n.$$.fragment,t),o=!1},d(t){t&&y(e),it(n)}}}function Wn(t){let e,n,o=tt(t[7]),r=[];for(let e=0;e<o.length;e+=1)r[e]=In(Rn(t,o,e));const i=t=>Z(r[t],1,1,(()=>{r[t]=null}));return{c(){e=x("div");for(let t=0;t<r.length;t+=1)r[t].c();C(e,"class","d-flex justify-content-center")},m(t,o){b(t,e,o);for(let t=0;t<r.length;t+=1)r[t]&&r[t].m(e,null);n=!0},p(t,n){if(210&n){let l;for(o=tt(t[7]),l=0;l<o.length;l+=1){const i=Rn(t,o,l);r[l]?(r[l].p(i,n),K(r[l],1)):(r[l]=In(i),r[l].c(),K(r[l],1),r[l].m(e,null))}for(Q(),l=o.length;l<r.length;l+=1)i(l);V()}},i(t){if(!n){for(let t=0;t<o.length;t+=1)K(r[t]);n=!0}},o(t){r=r.filter(Boolean);for(let t=0;t<r.length;t+=1)Z(r[t]);n=!1},d(t){t&&y(e),w(r,t)}}}function Jn(e){let n,o,r,i,l,c;return{c(){n=k("You joined as spectator."),o=x("br"),r=k("\n                I want to\n                "),i=x("button"),i.textContent="become a voter",C(i,"class","btn btn-light btn-sm")},m(t,s){b(t,n,s),b(t,o,s),b(t,r,s),b(t,i,s),l||(c=S(i,"click",e[10]),l=!0)},p:t,i:t,o:t,d(t){t&&(y(n),y(o),y(r),y(i)),l=!1,c()}}}function Bn(t){let e,n=t[11]+"";return{c(){e=k(n)},m(t,n){b(t,e,n)},p(t,o){128&o&&n!==(n=t[11]+"")&&j(e,n)},d(t){t&&y(e)}}}function In(t){let e,n,o,l,c,s;return n=new ft({props:{color:t[4]?"#eee":null,rotation:t[1](),$$slots:{default:[Bn]},$$scope:{ctx:t}}}),{c(){e=x("button"),ot(n.$$.fragment),o=_(),e.disabled=t[4],C(e,"class","btn m-0 p-0 svelte-142q46i"),A(e,"selected",t[11]==t[6].vote)},m(r,a){b(r,e,a),rt(n,e,null),v(e,o),l=!0,c||(s=[S(e,"click",(function(){i(ee(t[11]))&&ee(t[11]).apply(this,arguments)})),S(e,"keypress",(function(){i(ee(t[11]))&&ee(t[11]).apply(this,arguments)}))],c=!0)},p(o,r){t=o;const i={};16&r&&(i.color=t[4]?"#eee":null),2&r&&(i.rotation=t[1]()),131200&r&&(i.$$scope={dirty:r,ctx:t}),n.$set(i),(!l||16&r)&&(e.disabled=t[4]),(!l||192&r)&&A(e,"selected",t[11]==t[6].vote)},i(t){l||(K(n.$$.fragment,t),l=!0)},o(t){Z(n.$$.fragment,t),l=!1},d(t){t&&y(e),it(n),c=!1,r(s)}}}function Pn(t){let e,n;return e=new le({}),{c(){ot(e.$$.fragment)},m(t,o){rt(e,t,o),n=!0},i(t){n||(K(e.$$.fragment,t),n=!0)},o(t){Z(e.$$.fragment,t),n=!1},d(t){it(e,t)}}}function Gn(t){let e,n,o,r,i,l,c,s,a,u,d,f,p,m,g,h,$,w,k,z=[],S=new Map,N=t[2]&&Mn(t),O=tt(t[3]);const j=t=>t[14].id;for(let e=0;e<O.length;e+=1){let n=An(t,O,e),o=j(n);S.set(o,z[e]=qn(o,n))}let E=t[4]&&Fn(t);const A=[Jn,Wn],M=[];function q(t,e){return t[6].is_spectator?0:1}s=q(t),a=M[s]=A[s](t),f=new jn({});let F=t[0]&&Pn();return w=new rn({}),{c(){N&&N.c(),e=_(),n=x("div");for(let t=0;t<z.length;t+=1)z[t].c();o=_(),E&&E.c(),r=_(),i=x("div"),l=x("div"),c=x("div"),a.c(),u=_(),d=x("div"),ot(f.$$.fragment),p=_(),F&&F.c(),m=_(),g=x("div"),g.textContent=" ",h=_(),$=x("div"),ot(w.$$.fragment),C(n,"class","participants svelte-142q46i"),R(n,"--radius",Tn+"vw"),C(c,"class","col"),C(l,"class","row"),C(d,"class","row"),C(i,"class","container text-center"),C(g,"class","my-5"),C($,"class","fixed-bottom bg-white"),R($,"border-top","1px solid rgba(0, 0, 0, 0.125)")},m(t,a){N&&N.m(t,a),b(t,e,a),b(t,n,a);for(let t=0;t<z.length;t+=1)z[t]&&z[t].m(n,null);v(n,o),E&&E.m(n,null),b(t,r,a),b(t,i,a),v(i,l),v(l,c),M[s].m(c,null),v(i,u),v(i,d),rt(f,d,null),b(t,p,a),F&&F.m(t,a),b(t,m,a),b(t,g,a),b(t,h,a),b(t,$,a),rt(w,$,null),k=!0},p(t,[r]){t[2]?N?N.p(t,r):(N=Mn(t),N.c(),N.m(e.parentNode,e)):N&&(N.d(1),N=null),26&r&&(O=tt(t[3]),Q(),z=nt(z,r,j,1,t,O,S,n,et,qn,o,An),V()),t[4]?E?(E.p(t,r),16&r&&K(E,1)):(E=Fn(t),E.c(),K(E,1),E.m(n,null)):E&&(Q(),Z(E,1,1,(()=>{E=null})),V());let i=s;s=q(t),s===i?M[s].p(t,r):(Q(),Z(M[i],1,1,(()=>{M[i]=null})),V(),a=M[s],a?a.p(t,r):(a=M[s]=A[s](t),a.c()),K(a,1),a.m(c,null)),t[0]?F?1&r&&K(F,1):(F=Pn(),F.c(),K(F,1),F.m(m.parentNode,m)):F&&(Q(),Z(F,1,1,(()=>{F=null})),V())},i(t){if(!k){for(let t=0;t<O.length;t+=1)K(z[t]);K(E),K(a),K(f.$$.fragment,t),K(F),K(w.$$.fragment,t),k=!0}},o(t){for(let t=0;t<z.length;t+=1)Z(z[t]);Z(E),Z(a),Z(f.$$.fragment,t),Z(F),Z(w.$$.fragment,t),k=!1},d(t){t&&(y(e),y(n),y(r),y(i),y(p),y(m),y(g),y(h),y($)),N&&N.d(t);for(let t=0;t<z.length;t+=1)z[t].d();E&&E.d(),M[s].d(),it(f),F&&F.d(t),it(w)}}}const Tn=45;function Xn(t,e,n){let o,r,i,l,c,s,a,d;u(t,Tt,(t=>n(8,o=t))),u(t,Ut,(t=>n(9,r=t))),u(t,Pt,(t=>n(2,i=t))),u(t,Mt,(t=>n(3,l=t))),u(t,Bt,(t=>n(4,c=t))),u(t,Dt,(t=>n(5,s=t))),u(t,It,(t=>n(6,a=t))),u(t,qt,(t=>n(7,d=t)));let f,p=!1;F((()=>{Kt(gt("websocket_url")),n(0,p=new URLSearchParams(window.location.search).get("debug"))}));return t.$$.update=()=>{512&t.$$.dirty&&function(t){const e=window.document,n=e.querySelector('link[rel*="icon"]')||e.createElement("link");n.type="image/svg+xml",n.rel="shortcut icon",n.href=function(t){return`data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 width=%22256%22 height=%22256%22 viewBox=%220 0 100 100%22><text x=%2250%%22 y=%2250%%22 dominant-baseline=%22central%22 text-anchor=%22middle%22 font-size=%2280%22>${t}</text></svg>`}(t),e.getElementsByTagName("head")[0].appendChild(n)}(r),256&t.$$.dirty&&n(1,f=vt(o,-3,3))},[p,f,i,l,c,s,a,d,o,r,()=>Vt("settings",{is_spectator:!1})]}class Dn extends st{constructor(t){super(),ct(this,t,Xn,Gn,l,{},En)}}function Hn(t){let e,n;return e=new jt({}),{c(){ot(e.$$.fragment)},m(t,o){rt(e,t,o),n=!0},i(t){n||(K(e.$$.fragment,t),n=!0)},o(t){Z(e.$$.fragment,t),n=!1},d(t){it(e,t)}}}function Ln(t){let e,n;return e=new Dn({}),{c(){ot(e.$$.fragment)},m(t,o){rt(e,t,o),n=!0},i(t){n||(K(e.$$.fragment,t),n=!0)},o(t){Z(e.$$.fragment,t),n=!1},d(t){it(e,t)}}}function Un(e){let n,o,r,i;const l=[Ln,Hn],c=[];return n=function(t,e){return t[0]?0:1}(e),o=c[n]=l[n](e),{c(){o.c(),r=z()},m(t,e){c[n].m(t,e),b(t,r,e),i=!0},p:t,i(t){i||(K(o),i=!0)},o(t){Z(o),i=!1},d(t){t&&y(r),c[n].d(t)}}}function Yn(t){return[gt("websocket_url")]}return new class extends st{constructor(t){super(),ct(this,t,Yn,Un,l,{})}}({target:document.querySelector("#poker")})}();
